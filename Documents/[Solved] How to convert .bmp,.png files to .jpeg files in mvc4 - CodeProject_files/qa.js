function CheckForUndo(n){if(!$(n).prop("checkForUndo")){var t=$(n).find(".Undo");$(n).prop("checkForUndo",!0)}}function getWrapperName(n,t){return"Report_"+t+"_"+n}function getReportFormHtml(n,t,i,r,u){for(var o=getWrapperName(n,t),e='<span name="'+o+'">  <span class="result tiny-text invisible"><\/span>  <span class="tooltip report" style="padding:0 10px">    <img height="16px" width="16px" src="/images/flag16.png" border="0" alt="report" /><div class="tooltip-flyout" style="width:130px !important;line-height:17px">',f=0;f<u.length;f++)e+='     <div class="list-item"><a href="#xx'+n+'xx"  title = "Report as " '+u[f].name+'"  onclick="return ReportItem('+n+","+t+","+i+","+r+","+u[f].reportTypeId+', false);">'+u[f].name+"<\/a><\/div>";return e+"<\/div>  <\/span><\/span>"}function reportCallback(n,t,i){var u=getWrapperName(n,t),r=$("[name='"+u+"']");r.length&&(i.length>0?r.find(".result").html(i).show():r.find(".result").html("No response received"))}function UnReportItem(n,t,i){var o=getWrapperName(n,t),r=$("[name='"+o+"']"),f=r.find(".report-comment"),u,e;return f.length>0&&(comments=f.val()||""),u=r.find(".result"),u.length&&u.html('<img class="loading" width="16px" height="16px" src="/images/loading16.gif" />').show(),r.find(".report").hide(),e="/Script/Content/Report.aspx?obid="+n+"&obtid="+t+"&repid="+i+"&ajax=true&undo=true",$.get(e,function(i){reportCallback(n,t,i)}),!1}function ReportItem(n,t,i,r,u,f,e){var h=!0,s,a;if(e&&(h=confirm("Are you sure your want to vote this item as '"+f+"'?")),h){var c="",v=getWrapperName(n,t),o=$("[name='"+v+"']"),l=o.find(".report-comment");l.length>0&&(c=l.val()||"");s=o.find(".result");s.length&&s.html('<img class="loading" width="16px" height="16px" src="/images/loading16.gif" />').show();o.find(".report").hide();a="/Script/Content/Report.aspx?obid="+n+"&obtid="+t+"&obstid="+i+"&ovid="+r+"&rid="+u+"&comments="+escape(c)+"&ajax=true";$.get(a,function(i){reportCallback(n,t,i)})}return!1}function FollowService(n,t,r){var it=4,p=[414860,171947,730557,789822,826349,336232,567452,247932,373543,356056,355988,239898,316093,355904,546819,590701,712786,735911,595804,834949,327509],rt=r||4e3,ut=3,s,u={},h,f=t,e=function(n,t){var i=new $.Deferred,r;return typeof s!="string"&&s.length===0?i.reject("BaseUrl not set"):(r=JSON.stringify(t),$.ajax({type:"POST",cache:!1,url:s+n,data:r,contentType:"application/json; charset=utf-8",dataType:"json",tryCount:0,retryLimit:ut,timeout:rt}).done(function(n){var t=n?n.d:null;i.resolve(t)}).fail(function(n,t){i.reject(t)})),i.promise()},v=function(n,t){var i={objectTypeId:t.objectTypeId,objectId:t.objectId};return e(n,i)},l=function(n){u.isFollowing=n;y();f?n?(u.$followButton.css("display","none"),u.$unfollowButton.css("display","inline-block")):(u.$unfollowButton.css("display","none"),u.$followButton.css("display","inline-block")):(u.$followButton.css("display","none"),u.$unfollowButton.css("display","none"))},y=function(){u.$followButton.removeClass("processing");u.$unfollowButton.removeClass("processing")},w=function(n){return f?v("IsFollowingObject",n).done(function(n){l(n)}):!1},ft=function(n){if(f)return v("FollowObject",n).done(function(){l(!0)}).fail(function(){y()})},et=function(n){if(f)return v("UnfollowObject",n).done(function(){l(!1)}).fail(function(){y()})},b=function(n){var t;n===0?(t="No",u.$timelineLoadTopBtn.hide()):(t=n.toString(),u.$timelineLoadTopBtn.show());u.$timelineCount.html(t)},ot=function(n){var t=typeof u.events!="undefined"&&u.events!==null&&u.events.length>0?u.events[0].EventId:null;return(typeof n.criteria=="undefined"||n.criteria===null?e("GetTimelineCount",{categoryId:n.contentCategoryId,filter:n.filter,sinceEventId:t}):e("GetTimelineCountForCriteria",{categoryId:n.contentCategoryId,criteria:n.criteria,sinceEventId:t})).done(function(n){b(n)})},st=function(){var n=$.Deferred();return typeof h=="undefined"?f?e("GetFollowing").done(function(t){t&&t.AttributeIds&&t.AttributeIds.length>0&&(h=t.AttributeIds);n.resolve()}).fail(function(){n.reject()}):n.resolve():n.resolve(),n.promise()},kt=function(n){return n?/^[aeiou]/.test(n)?"an":"a":""},ht=function(n){return e("FollowAttribute",{attributeId:n})},ct=function(n){return e("UnfollowAttribute",{attributeId:n})},lt=function(n,t){(t?ht(n):ct(n)).done(at)},k=function(n,t){n=n||$("body");h=t;var i=$(".tags .t",n);i.each(function(){var n=$(this),t=$("a",n),i,r;t.length&&t[0].dataset&&t[0].dataset.id&&(i=parseInt(t[0].dataset.id),r=n.attr("data-followinit")==="true",r||isNaN(i)||n.prepend('<img class="follow" src="/images/follow.png" width="12px" height="12px" />'),n.attr("data-followinit","true"))});$("img",i).click(function(){var t;if(f){var u=$(this),i=$(this).parent(),r=$("a",i),n=parseInt(r[0].dataset.id);isNaN(n)||(t=d(n),lt(n,!t))}else window.location.href="/script/Membership/Logon.aspx"});g()},d=function(n){return h!==undefined&&h.indexOf(n)>=0},g=function(){st().done(function(){var n=$(".tags .t");n.each(function(){var r,t,n;$div=$(this);var u=$("a",$div),e=u.attr("data-id"),i=parseInt(e);isNaN(i)?$div.removeClass("followed"):(r=d(i),t=$("img",$div),r?($div.addClass("followed"),t.attr("src","/images/followed.png"),autoTooltip?($div.attr("data-enabletooltip","true"),$div.attr("data-tooltip","You are following this tag"),$div.attr("data-width","175px"),autoTooltip($div)):$div.attr("title","You are following this tag")):(n="Click the star to follow this tag",f||(n+=" (You'll need to log on first)"),$div.removeClass("followed"),autoTooltip?($div.attr("data-enabletooltip","true"),$div.attr("data-tooltip",n),$div.attr("data-width","125px"),autoTooltip($div)):$div.attr("title",n),t.attr("src","/images/follow.png")))})})},at=function(){h=undefined;g()},nt=function(n,t,r){var f,o,h,l,v;if($.isArray(t)&&t.length>0){u.$timelineBody.scrollTop(0);r=r||"getNewer";var s=n.verbosity||"Full",e=n.numberOfColumns||1,a=u.events&&u.events.length>0;if(u.stickies=u.stickies||[],u.events=u.events||[],u.announcements=u.announcements||[],r==="getNewer"?(u.events&&u.events.length>0&&(n.gapTop=t[t.length-1],n.gapBottom=u.events[0]),u.events=t.concat(u.events)):r==="getOlder"&&(u.events=u.events.concat(t)),f="",u.stickies&&u.stickies.length>0)for(i=0;i<u.stickies.length;i++)f+=c(u.stickies[i],s);if(u.events&&u.events.length>0){for(o=1,e>1&&(f+='<table cellspacing="8">'),i=0;i<u.events.length;i++)u.announcements&&(h=u.announcements.length>0&&(e>1?o%e==1:i===1),l=u.announcements.length>1&&i>2&&(e>1?o%e==1:i===3),e>1&&(h||l)&&(f+='<tr valign="top"><td colspan="'+e+'">'),h?f+=c(u.announcements[0],s):l&&(f+=c(u.announcements[1],s)),e>1&&(h||l)&&(f+="<\/td><\/tr>")),e>1?(v=100/e,o===1&&(f+='<tr valign="top">'),f+='<td width="'+v+'%">'+tt(n,u.events[i],s,a)+"<\/td>",o===e?(f+="<\/tr>",o=1):o++):f+=tt(n,u.events[i],s,a);if(e>1){while(o<=e)f+="<td><\/td>",o++;f+="<\/tr><\/table>"}}(!u.events||u.events.length<2)&&u.announcements.length>0&&(f+=c(u.announcements[0],s));(!u.events||u.events.length<4)&&u.announcements.length>1&&(f+=c(u.announcements[1],s));u.$timelineBody.html(f);a&&u.$timelineBody.find(".fade-expand.hidden").removeClass("hidden");r==="getNewer"&&b(0);k(u.$timelineBody);typeof bookmark!="undefined"&&bookmark.Initialise&&bookmark.Initialise()}},c=function(n,t){var i="",r;return typeof n!="undefined"&&n!==null&&(t==="Full"||t==="Medium"?(i+='<div class="content-list-item">',i+=n.IsMinor?'<div class="minor">':"<div>",r="",n.IconUrl&&(i+='<div class="thumbnail">',n.Url&&(i+='<a href="'+n.Url+'">'),i+='<img src="'+n.IconUrl+'" style="width:80px;height:auto;margin-top:25px">',n.Url&&(i+="<\/a>"),i+="<\/div>",r+="feature text"),i+='<div class="'+r+'">',n.Title&&(i+="<h3>",n.Url&&(i+='<a href="'+n.Url+'">'),i+=n.Title,n.Url&&(i+="<\/a>"),i+="<\/h3>"),i+=n.Description,i+="<\/div>\n",i+="<\/div>\n",i+="<\/div>\n"):n.Title&&(i+=n.IsMinor?'<div class="message-list-item minor">':'<div class="message-list-item">',i+='<div class="title">',n.Url&&(i+='<a href="'+n.Url+'">'),i+=n.Title,n.Url&&(i+="<\/a>"),i+="<\/div>\n",i+="<\/div>\n")),i},vt=function(n,t,i,r){var u="",l,s,a,e,c;if(typeof t!="undefined"&&t!==null&&t.Member!==null&&t.Item!==null){var h=t.Member,f=t.Item,v=f.ObjectSubtypeName!==null?f.ObjectSubtypeName:f.ObjectTypeName;if(n.usePexelForTypeImages&&t.ThumbnailSrc.indexOf("/script/Articles/Images/")>=0&&(l=p[Math.floor(Math.random()*p.length)],t.ThumbnailSrc="https://images.pexels.com/photos/"+l+"/pexels-photo-"+l+".jpeg?w=200"),i==="Full"){if(s=r?"content-list-item fade-expand hidden":"content-list-item",u+='<div class="'+s+'">',u+='<div class="">',u+='<div class="thumbnail">',t.ThumbnailUrl&&t.ThumbnailSrc&&(u+='<a href="'+t.ThumbnailUrl+'"><img src="'+t.ThumbnailSrc+'" style="width:100px;height:auto" /><\/a>'),u+="<\/div>\n",u+='<div class="text">',u+='<div class="title">',f.Title&&f.Url&&(u+='<a href="'+f.Url+'">'+f.Title+"<\/a>"),u+="<\/div>\n",u+='<div class="entry">',n.emitReadLaterMarker&&f.ObjectRefGuid&&(u+='<span data-type="bookmark" data-ref="'+f.ObjectRefGuid+'" data-mode="readlater" data-size="small"><\/span> &nbsp;'),u+=' <span title="'+o(t.OccuredAt)+'">'+o(t.OccuredAt)+'<\/span> by <span class="author"><a href="'+h.Url+'">'+h.Name+"<\/a><\/span> ",f.AssociatedObject&&f.AssociatedObjectUrl&&(u+=' on <span class="location"><a href="'+f.AssociatedObjectUrl+'">'+f.AssociatedObject+"<\/a><\/span>"),u+="<\/div>\n",f.Description&&(u+='<div class="description">'+f.Description+"<\/div>"),t.Attributes&&t.Attributes.length>0){for(u+='<div class="tags horizontal">',e=0;e<t.Attributes.length;e++)u+='<div class="t"><a data-id="'+t.Attributes[e].AttributeId+'" href="'+t.Attributes[e].Url+'">'+t.Attributes[e].Name+"<\/a><\/div>";u+="<\/div>\n"}u+="<\/div>\n";u+="<\/div>\n";u+="<\/div>\n"}else if(i==="Medium"){if(s=(r?"content-list-item fade-expand hidden":"content-list-item")+" "+i.toLowerCase(),u+='<div class="'+s+'">',u+='<div class="title">',f.Title&&f.Url&&(u+='<a href="'+f.Url+'">'+f.Title+"<\/a>"),u+="<\/div>\n",u+='<div class="entry">',n.emitReadLaterMarker&&f.ObjectRefGuid&&(u+='<span data-type="bookmark" data-ref="'+f.ObjectRefGuid+'" data-mode="readlater" data-size="small" class="align-center"><\/span>'),u+=' <span title="'+o(t.OccuredAt)+'">'+o(t.OccuredAt)+'<\/span> by <span class="author"><a href="'+h.Url+'">'+h.Name+"<\/a><\/span> ",f.AssociatedObject&&f.AssociatedObjectUrl&&(u+=' on <span class="location"><a href="'+f.AssociatedObjectUrl+'">'+f.AssociatedObject+"<\/a><\/span>"),u+="<\/div>\n",u+='<div class="description">',u+='<div class="thumbnail">',t.ThumbnailSrc&&t.ThumbnailUrl&&(u+='<a href="'+t.ThumbnailUrl+'"><img src="'+t.ThumbnailSrc+'"/><\/a>'),u+="<\/div>\n",f.Description&&(u+='<div class="text">'+f.Description+"<\/div>"),u+="<\/div>\n",t.Attributes&&t.Attributes.length>0){for(u+='<div class="tags horizontal">',a=0,e=0;e<t.Attributes.length;e++)if(u+='<div class="t"><a data-id="'+t.Attributes[e].AttributeId+'" href="'+t.Attributes[e].Url+'">'+t.Attributes[e].Name+"<\/a><\/div>",++a==it&&e<t.Attributes.length-1){u+='<div class="t" title="...and more">...<\/div>';break}u+="<\/div>\n"}u+="<\/div>\n"}else i==="SingleLine"?(c=f.Title,c===null&&(c=v+" on "),s=r?"message-list-item fade-expand hidden":"message-list-item",u+='<div class="'+s+'">',typeof f.Count!="undefined"&&f.Count!==null&&(u+='<div class="count" title="'+f.CountDescription+'">'+f.Count+" <\/div>"),u+='<div class="title"><a href="'+f.Url+'">'+c+"<\/a>",f.AssociatedObject&&f.AssociatedObject.length>0&&(u+=' - <span class="location">'+h.Name+" on "+f.AssociatedObject+"<\/span>"),u+="<\/div><\/div>\n"):u="<div>Invalid display mode<\/div>"}return u},yt=function(n,t,i,r){var u="",h;if(typeof t!="undefined"&&t!==null&&t.Member!==null&&t.Item!==null&&t.SecondaryItem!==null){var s=t.Member,e=t.Item,f=t.SecondaryItem,a=e.ObjectSubtypeName!==null?e.ObjectSubtypeName:e.ObjectTypeName,c="entered in",l="in";switch(t.EventTypeName){case"EnteredContest":c="entered";l="in";break;case"WonPrize":c="won a prize in";l="for"}return i==="Full"?(h=r?"content-list-item fade-expand hidden":"content-list-item",u+='<div class="'+h+'">',u+='<div class="">',u+='<div class="thumbnail">',u+=t.ThumbnailSrc&&t.ThumbnailUrl?'<a href="'+t.ThumbnailUrl+'"><img src="'+t.ThumbnailSrc+'"/><\/a>':'<img src="/script/Contests/Images/award100.png" style="width:100px;height:66px" /><\/a>',u+="<\/div>\n",u+='<div class="text">',u+='<div class="title">',u+='<a href="'+s.Url+'">'+s.Name+"<\/a> "+c,e.Url&&e.Title&&(u+=' <a href="'+e.Url+'">'+e.Title+"<\/a> "),f.Url&&f.Title&&(u+=l+' <a href="'+f.Url+'">'+f.Title+"<\/a> "),u+="<\/div>\n",u+='<div class="entry">',u+=' <span title="'+o(t.OccuredAt)+'">'+o(t.OccuredAt)+"<\/span>",u+="<\/div>\n",f.Description&&(u+='<div class="description"><a href="'+f.Url+'">'+f.Description+"<\/a><\/div>"),u+="<\/div>\n",u+="<\/div>\n",u+="<\/div>\n"):i==="Medium"?(h=(r?"content-list-item fade-expand hidden":"content-list-item")+" "+i.toLowerCase(),u+='<div class="'+h+'">',u+='<div class="title">',u+='<a href="'+s.Url+'">'+s.Name+"<\/a> "+c+" a contest",u+="<\/div>\n",u+='<div class="entry">',n.emitReadLaterMarker&&f.ObjectRefGuid&&(u+='<span data-type="bookmark" data-ref="'+f.ObjectRefGuid+'" data-mode="readlater" data-size="small"><\/span> &nbsp;'),u+=' <span title="'+o(t.OccuredAt)+'">'+o(t.OccuredAt)+"<\/span>",u+="<\/div>\n",u+="<div>",u+='<div class="thumbnail">',u+=t.ThumbnailSrc&&t.ThumbnailUrl?'<a href="'+t.ThumbnailUrl+'"><img src="'+t.ThumbnailSrc+'"/><\/a>':'<img src="/script/Contests/Images/award100.png" style="width:100px;height:66px" /><\/a>',u+="<\/div>\n",f.Description&&e.Title&&(u+='<div class="text">'+f.Description+" in "+e.Title+"<\/div>"),u+="<\/div>\n",u+="<\/div>\n"):i==="SingleLine"?(h=r?"message-list-item fade-expand hidden":"message-list-item",u+='<div class="'+h+'">',u+='<div class="title"><a href="'+s.Url+'">'+s.Name+"<\/a> "+c,f.Title&&f.Url&&(u+=' <a href="'+f.Url+'">'+f.Title+"<\/a> "),e.Title&&e.Url&&(u+=l+' <a href="'+e.Url+'">'+e.Title+"<\/a>"),u+="<\/div><\/div>\n"):u="<div>Invalid display mode<\/div>",u}},tt=function(n,t,i,r){if(t)switch(t.EventTypeName){case"Posted":case"Updated":return vt(n,t,i,r);case"EnteredContest":case"WonPrize":return yt(n,t,i,r)}},o=function(n){var t=Math.round((new Date-Date.parse(n))/1e3),r=60,u=r*60,i=u*24,f=i*7,e=i*30,o=i*365;return t<5?"just then.":t<r?t+" seconds ago.":t<2*r?"a minute ago.":t<u?Math.floor(t/r)+" minutes ago.":Math.floor(t/u)===1?"1 hour ago.":t<i?Math.floor(t/u)+" hours ago.":t<i*2?"yesterday":t<f?Math.floor(t/i)+" days ago.":t<f*2?"last week":t<e?Math.floor(t/f)+" weeks ago.":t<e*2?"last month":t<o?Math.floor(t/e)+" months ago.":t<o*2?"last year":Math.floor(t/o)+" years ago."},a=function(n,t){t=t||"getNewer";var i=null,r=null;return t==="getNewer"?(i=u.events!==null&&u.events.length>0?u.events[0].EventId:null,u.$timelineLoadTopBtn.addClass("spin")):t==="getOlder"&&(length=u.events?u.events.length:0,r=u.events!==null&&length>0?u.events[length-1].EventId:null,u.$timelineLoadBottomBtn.addClass("spin")),(typeof n.criteria=="undefined"||n.criteria===null?e("GetTimeline",{categoryId:n.contentCategoryId,sinceEventId:i,beforeEventId:r,filter:n.filter,pageSize:n.pageSize,reduceDuplicateItems:n.reduceDuplicateItems}):e("GetTimelineForCriteria",{categoryId:n.contentCategoryId,criteria:n.criteria,sinceEventId:i,beforeEventId:r,pageSize:n.pageSize,reduceDuplicateItems:n.reduceDuplicateItems})).done(function(i){var f,r;if(i){if(t==="getOlder"&&$.isArray(i.Events)&&i.TotalEvents===i.Events.length&&u.$timelineLoadBottomBtn.hide(),$.isArray(i.Events))for(f=0;f<i.Events.length;f++)r=i.Events[f],typeof r.OccuredAt=="string"&&r.OccuredAt[0]==="/"&&(r.OccuredAt=new Date(parseInt(r.OccuredAt.substr(6))));nt(n,i.Events,t)}}).always(function(){u.$timelineLoadTopBtn.removeClass("spin");u.$timelineLoadBottomBtn.removeClass("spin")})},pt=function(n){(typeof n!="string"||n.length===0)&&dfd.reject("followService: BaseUrl not valid");n[n.length-1]!=="/"&&(n+="/");s=n},wt=function(n,t){var i=new $.Deferred;return u.$followButton=$("#"+n.followButtonId),u.$unfollowButton=$("#"+n.unfollowButtonId),u.$followButton.click(function(){f?(u.$followButton.addClass("processing"),ft(n.item)):window.location.href="/script/Membership/Logon.aspx"}),u.$unfollowButton.click(function(){f?(u.$unfollowButton.addClass("processing"),et(n.item)):window.location.href="/script/Membership/Logon.aspx"}),typeof t!="undefined"&&w!==null?(l(t),i.resolve()):w(n.item).done(function(){i.resolve()}).fail(function(n){i.reject(n)}),i.promise()},bt=function(n,t,i,r){var h=new $.Deferred,e,o,f;return(typeof s!="string"||s.length===0)&&h.reject("followService: BaseUrl not valid"),n.refreshMillisecs=n.refreshMillisecs||0,n.verbosity=n.verbosity||"Full",n.numberOfColumns=n.numberOfColumns||1,n.autoload=n.autoload||!1,n.gapTop=null,n.gapBottom=null,n.emitReadLaterMarker=n.emitReadLaterMarker||!1,n.usePexelForTypeImages=n.usePexelForTypeImages||!1,n.usePexelForTypeImages=!1,u.events=u.events||[],u.stickies=i||[],u.announcements=r||[],e=n.verbosity==="Full"?"content-list":"message-list",o="",n.autoload&&(o='<label class="autoload invisible"><input type="checkbox" />Auto Load<\/label>'),f=$("#"+n.timelineContainerId),f.append('<div class="header"><button class="load invisible" style="margin-top:-20px"><span class="count">No <\/span>New <img src="/images/refresh.gif" width="16" height="16" /><\/button>'+o+"<\/div>").append('<div class="'+e+'"><\/div>').append('<div class="footer"><button class="load invisible"> Load More <img src="/images/refresh.gif" width="16" height="16" class="hidden" /><\/button><\/div>'),u.$timelineContainer=f,u.$timelineHeader=$(".header",f),u.$timelineBody=$("."+e,f),u.$timelineFooter=$(".footer",f),u.$timelineCount=$(".count",f),u.$timelineLoadTopBtn=$(".load",u.$timelineHeader),u.$timelineLoadBottomBtn=$(".load",u.$timelineFooter),u.$timelineAutoLoad=$(".autoload input",f),$.isArray(t)&&t.length>0?nt(n,t,"getNewer"):a(n,"getNewer"),n.refreshMillisecs>0&&(n.autoload?window.setInterval(a,n.refreshMillisecs,n,"getNewer"):window.setInterval(ot,n.refreshMillisecs,n),u.$timelineLoadTopBtn.click(function(){a(n,"getNewer")})),u.$timelineLoadBottomBtn.click(function(){a(n,"getOlder")}),u.$timelineLoadBottomBtn.show(),h.promise()};return pt(n||"/script/follow/webservices/FollowServices.aspx/"),{initFollowObjectButtons:wt,initTimelineUI:bt,initAttributeUI:k}}function NavBarMenu(n,t){var o=this,s=100,h=500,r=0,c=0,i=0,u=0,p=n,f=t,l=function(){r&&(window.clearTimeout(r),r=null)},a=function(){l();e();u&&(i=$(u).addClass("open"))},e=function(){if(i){if(i.attr("over")||i.find("[over=true]").length>0)return;i.removeClass("open");i.parents("[over!=true].open").removeClass("open")}if(i){var n=i.parents("[over=true]");i=n.length>0?$(n[0]):null}},v=function(){u=this;r=window.setTimeout(a,i?0:s)},y=function(){u=0;c=window.setTimeout(e,h)};this.InitMenu=function(){$&&(("ontouchstart"in window||navigator.msMaxTouchPoints||navigator.userAgent.toLowerCase().match(/windows phone os 7/i))&&$(f).doubleTapToGo(),$(f+".openable").hover(v,y),$(f).hover(function(){$(this).attr("over","true")},function(){$(this).removeAttr("over")}),$(document).click(o.CloseMenu))};this.ShowMap=function(n,t){var i=$("#"+t),r,u,f;n.populated||n.populating||(n.populating=!0,r=i.parent(),r.css({position:"relative"}),u={lines:13,length:32,width:14,radius:23,scale:.13,corners:1,opacity:.25,rotate:0,direction:1,speed:1,trail:60,color:"#666",fadeColor:"transparent",left:r.width()-30+"px"},f=new Spinner(u).spin(r[0]),i.load("/script/content/Ajax/SiteMap.aspx",function(){n.populated=!0;f.stop()}),window.setTimeout(this.InitMenu,200),n.populated=!0,n.populating=!1);n.populated&&(this.InitMenu(),i.css("width","auto"),i.css("height","auto"))};$.fn.doubleTapToGo=function(){return!("ontouchstart"in window)&&!navigator.msMaxTouchPoints&&!navigator.userAgent.toLowerCase().match(/windows phone os 7/i)?!1:(this.each(function(){if($(this).hasClass("openable")){var n=!1;$(this).bind("touchstart",function(t){var i=$(this);n&&i[0]==n[0]||(n&&n.removeClass("open"),t.preventDefault(),n=i,i.addClass("open"))});$(document).bind("touchstart MSPointerDown",function(t){var r,i;if(n&&t.target!=n[0]){for(r=$(t.target).parents(),i=0;i<r.length;i++)if(r[i]==n[0])return;n&&n.removeClass("open");n=!1}})}}),this)}}function InitWatermark(n,t){var i=$("#"+n),r;i&&(i.blur(function(){UpdateWatermark(this,t)}),i.focus(function(){UpdateWatermark(this,t)}),r=$.trim(i.val()),r==""||r==t?(i.val(t),i.addClass("subdue")):r!=""&&r!=t&&i.removeClass("subdue"))}function UpdateWatermark(n,t){if(n){var i=$.trim($(n).val());i==t&&$(n).hasClass("subdue")?($(n).val(""),$(n).removeClass("subdue")):i!=""||$(n).hasClass("subdue")?$(n).removeClass("subdue"):($(n).val(t),$(n).addClass("subdue"))}}function NotificationAlert(n,t,i){var o=this,r=$("#"+n),u=$("#"+t),f=i,e=function(){r.populated||r.populating||(r.populating=!0,u.load(f,{cache:!1},function(){r.populated=!0}),r.populated=!0,r.populating=!1)};this.MarkAsRead=function(n,t,i,r){var u=$("#"+i),f=u.html();return u.html('<img src="/images/loading16.gif" align="absmiddle" style="border:0" />'),$.ajax({type:"POST",cache:!1,url:t,data:"{notificationId: "+n+"}",contentType:"application/json; charset=utf-8",dataType:"json",tryCount:0,retryLimit:3,timeout:5e3,success:function(){u.remove();$("#"+r).children().first().removeClass("bold")},error:function(){u.html(f)}}),!1};this.initialise=function(){$(r).bind("mouseover",e)}}function getInternetExplorerVersion(){var n=-1,t,i;return navigator.appName==="Microsoft Internet Explorer"&&(t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),i.exec(t)!==null&&(n=parseFloat(RegExp.$1))),n}function getVoteFormHtml(n,t,i,r,u){var f="",o="/script/ratings/",s=n.toString()+","+t.toString()+","+i.toString()+", false, true, 0, 'TextOnly', '"+r+"',"+u.toString(),e;if(r==="GoodOrBad"||r==="UpVoteOnly")f+='<a href="#xx'+n.toString()+'xx" onclick="return rateItem(5, '+s+');"><img height="16px" width="16px" src="'+o+'/images/upvote16.png" alt="upvote" title="upvote" border="0" align="absmiddle" /><\/a>\n',f+=r==="GoodOrBad"?'<br /><a href="#xx'+n.toString()+'xx" onclick="return rateItem(1, '+s+');"><img height="16px" width="16px" src="'+o+'/images/downvote16.png" alt="downvote" title="downvote" border="0" align="absmiddle" /><\/a>\n':'<br /><img height="16px" width="16px" src="'+o+'/images/nodownvote16.png" alt="downvoting not available" title="downvoting not available" border="0" align="absmiddle" />\n';else if(r==="RatingScale"){for(f+='Rate:\n<a href="#xx'+n.toString()+'xx" onclick="return rateItem(1, '+s+');"><img height="14px" width="14px" src="'+o+'Images/thmbdn.png" alt="vote 1" border="0" align="absmiddle" /><\/a>\n',e=1;e<=5;e++)f+='<a class="toolbar nav-link" href="#xx'+n.toString()+'xx" title="vote this message a '+e.toString()+'" onclick="return rateItem('+e.toString()+", "+s+');"><b>'+e.toString()+"<\/b><\/a>\n";f+='<a href="#xx'+n.toString()+'xx" onclick="return rateItem(5, '+s+');"><img height="14px" width="14px" src="'+o+'Images/thmbup.png" border="0" alt="vote 5" align="absmiddle" /><\/a>\n'}return f}function UnrateItem(n,t,i,r,u,f,e){return t>0&&i>0&&(n<=0?ShowErrorMessage("You must supply a rating history ID",t):(SetControlVisibility(t),e||(e=ratingAjaxCallback),$.get("/Script/Ratings/Ajax/RateItem.aspx?undo=true&obid="+t+"&obtid="+i+"&rvhid="+n+"&rvmid="+f+(r?"&rdm="+r:"")+(u?"&rvm="+u:""),function(n){e(t,n)}))),!1}function rateItem(n,t,i,r,u,f,e,o,s,h,c){if(t>0&&i>0){var l="";n||(n=$("div[name=RateItem_"+t+"]").find("input[type=radio]:checked").val(),l=$("[name=RateItem_"+t+"] .RateComment")[0]);l=l?l.value.replace(/^\s+|\s+$/g,""):"";n<=0?ShowErrorMessage("You must select a value to vote",t):n<=e&&l===""&&u&&f?ShowErrorMessage("You must provide a comment",t):(f||n>e)&&(SetControlVisibility(t),c||(c=ratingAjaxCallback),$.get("/Script/Ratings/Ajax/RateItem.aspx?obid="+t+"&obtid="+i+"&obstid="+r+"&rvv="+n+"&rvmid="+h+(l?"&rvc="+escape(l):"")+(o?"&rdm="+o:"")+(s?"&rvm="+s:""),function(n){c(t,n)}))}return!1}function ratingAjaxCallback(n,t){var i=$("[name='RateItem_"+n+"']");i.length&&(t.length>0&&(i.find(".rating-result span").html(t).show(),$("[name=CurRat_"+n+"]").hide()),i.find(".loading").hide(),i.find(".ajaxHist").remove(),i.find(".rating-comment").remove())}function SetControlVisibility(n){var t=$("[name='RateItem_"+n+"']"),i,r;t.length&&(t.find(".voteform").hide(),t.find(".voteTbl").hide(),t.find(".rating-comment").hide(),i=t.find(".rating-result span"),i.html(""),r=t.find(".loading"),r.length?r.show():i.prepend('<img class="loading" width="16px" height="16px" src="/images/loading16.gif" />'))}function ShowErrorMessage(n,t){ratingAjaxCallback(t,n)}function starRating(n,t,i){var r=function(n){var t=getInternetExplorerVersion(),r=t>0&&t<=8;$(n).each(function(){$(this).find("input:submit").hide();$(".content",this).length>0&&($(this).find(".voting").hide(),$(this).hover(function(){$(".content",this).hide();$(".voting",this).show()},function(){$(".content",this).show();$(".voting",this).hide()}));var n=$('<div class="rating-star-block"><\/div>');$(this).find("input:radio").each(function(){var f="vote "+this.value,t=$('<a href="#"><\/a>').attr("rating",this.value).text(f).addClass("star outline");r||t.attr("title",f);u(t,i);n.append(t);$(this).is(":checked")&&t.prevAll().andSelf().removeClass("outline").addClass("filled")});$(this).find(".voting").append(n).find("input:radio").hide()})},u=function(n){$(n).click(function(n){var r=$(this),u=$(this).parent(),i=r.attr("rating");u.parent().find("input:radio[value="+i+"]").prop("checked",!0);n.preventDefault();t?t(i):$(this).closest("form").submit()}).hover(function(){$(this).prevAll().andSelf().removeClass("outline").addClass("filled");$(this).nextAll().addClass("outline")},function(){$(this).siblings().andSelf().removeClass("filled").addClass("outline")})};r(n,t)}function DeleteEntry(n,t,i,r){var o="LoadingImg"+n,u="StatusMsgId"+n,f=$("#"+i).parent().parent().parent(),e,s;f.css("position","relative");e={length:17,width:5,radius:12,trail:50,shadow:!1,color:"#666"};s=new Spinner(e).spin(f[0]);$("#"+u).remove();$.get(t,function(n){$("#"+o).remove();$("#"+i).parent().after('<br><div class="float-right padded-top" id="'+u+'">'+n+"<\/span>");r&&n&&n.indexOf("Deleted")!=-1&&($("#"+i).remove(),setTimeout(function(){r()},500))})}function RegisterPreviewRefresh(n,t,i,r,u,f,e){previewHelper.interval=n;previewHelper.editorId=t;previewHelper.whatHaveYoutriedId=i;previewHelper.editorInWysiwygMode=r;previewHelper.lastEditorContent="";previewHelper.intervalId=0;previewHelper.objectId=e;previewHelper.editLockStatusUpdateServiceUrl=f;$("#"+t).focusin(function(){UpdatePreview();previewHelper.intervalId=setInterval(UpdatePreview,n)});$("#"+t).focusout(function(){UpdatePreview();clearInterval(previewHelper.intervalId)});$("#"+i).focusin(function(){UpdatePreview();previewHelper.intervalId=setInterval(UpdatePreview,n)});$("#"+i).focusout(function(){UpdatePreview();clearInterval(previewHelper.intervalId)});$("#"+u).change(function(){RefreshPreview(previewHelper);previewHelper.objectId>0&&UpdateEditLockStatus()})}function UpdateEditLockStatus(){if(!(previewHelper.objectId<=0)){var n="{ articleId:   "+previewHelper.objectId+"}";$.ajax({type:"POST",cache:!1,url:previewHelper.editLockStatusUpdateServiceUrl,data:n,contentType:"application/json; charset=utf-8",dataType:"json",tryCount:0,retryLimit:maxRetryLimit,timeout:5e3,success:function(){},error:function(){}})}}function UpdatePreview(){var n=!1;HasNewNonEmptyContent()?(RefreshPreview(previewHelper),n=!0):previewHelper.lastEditorContent==""&&($("#Preview").html("&hellip;"),n=!0);n&&UpdateEditLockStatus()}function HasNewNonEmptyContent(){var n=GetEditorContent(previewHelper.editorInWysiwygMode,previewHelper.editorId,previewHelper.whatHaveYoutriedId),t;return n?n==""||n==previewHelper.lastEditorContent?(previewHelper.lastEditorContent=n,!1):(previewHelper.lastEditorContent=n,isDebug&&($("#refresh-count").show(),t=$("#refresh-count").html(),t=parseInt(t)+1,$("#refresh-count").html(t)),!0):(previewHelper.lastEditorContent="",!1)}function GetEditorContent(n,t,i){var r="",u=$("#"+i);return(u.length>0&&(r=u.val(),r.length>0&&(r=(n?"<p><b>What I have tried:<\/b><\/p>":"\n\n<b>What I have tried:<\/b>\n\n")+r)),n)?editor.getHTML()+r:$("#"+t)[0].value+r}function TryPostNewEntry(n,t,i){var f=GetEditorContent(t.useWysiwygEditor,t.contentId,t.whatHaveYoutriedId),r=$("#"+n.postErrorDivId),u=$("#"+n.logonErrorDivId);r.hide();u.hide();f.length<n.minContentLength?r.show().html(n.tooShortMsg):i.loggedIn?DoPostEntry(t,n,r):DoLogon(i,t,n,r,u)}function DoLogon(n,t,i,r,u){var f=GetLogonFormJson(n);f!=null?(PreSubmitUI(t),$.ajax({type:"POST",cache:!1,url:n.postUrl,data:f,dataType:"html",tryCount:0,retryLimit:maxRetryLimit,timeout:5e3,success:function(n){var f=n==null||n.length==0;PostSubmitUI(t,f,function(){DoPostEntry(t,i,r)});n==null?r.show().html(i.generalErrorMsg):n.length>0&&(r.show().html("Failed to logon or sign-up"),u.show().html(n))},error:function(n,i,u){var f;if(i=="timeout"){if(this.tryCount++,this.tryCount<=this.retryLimit){$.ajax(this);return}f="We have tried to log you on "+this.retryLimit+" times without success. Our servers are just a little overworked. Sorry.";PostSubmitUI(t,!1);r.show().html(f);return}f=isDebug?GetDebugError(n,i,u):n.status==500?"Oops! There seems to be a server problem. Please try posting your "+t.typeName+" later.":"Oops! There was an unexpected problem adding your "+t.typeName+". Please try again later.";PostSubmitUI(t,!1);r.show().html(f)}})):r.show().html(i.generalErrorMsg)}function GetLogonFormJson(n){var t,i;return n==null?null:(t=$("#"+n.containerId),t.length==0)?null:(i={Email:t.find('input[name$="CurrentEmail"]').val(),Password:t.find('input[name$="CurrentPassword"]').val(),RememberMe:!0},(i.Email.replace(/\s/g,"").length==0||i.Password.replace(/\s/g,"").length==0)&&(i={Email:t.find('input[name$="QuickEmail"]').val(),Password:t.find('input[name$="QuickPassword"]').val(),RememberMe:!0,Name:t.find('input[name$="QuickName"]').val(),AgreeToTerms:t.find(':checkbox[id$="TermsOfUse"]')[0].checked,Subscribe:t.find(':checkbox[id$="AllNewsletters"]')[0].checked}),i)}function DoPostEntry(n,t,i){var u=GetEditorContent(n.useWysiwygEditor,n.contentId,n.whatHaveYoutriedId),r;PreSubmitUI(n);postData={ParentId:n.parentId,Content:u,WysiwygEditorUsed:n.useWysiwygEditor,IgnoreHtml:$("#"+n.ignoreHtmlId)[0].checked};typeof n.recaptchaId=="string"&&n.recaptchaId.length>0&&(r=$("#"+n.recaptchaId),r.length>0&&(postData[n.recaptchaId]=r.val()));$.ajax({type:"POST",cache:!1,url:n.postUrl,data:postData,dataType:"json",tryCount:0,retryLimit:maxRetryLimit,timeout:5e3,success:function(t){var r=t.success;i.show().html("");PostSubmitUI(n,r,function(){Submitted=!0;$("#"+n.containerId).slideUp();$("#new-child-loading").after(unescape(t.html))});r||i.show().html(unescape(t.html))},error:function(t,r,u){var f,e,o;if(r=="timeout"){if(this.tryCount++,this.tryCount<=this.retryLimit){f=this.retryLimit-this.tryCount;f=f<=0?"Last try":f==1?"One attempt remaining":f+" attempts remaining";i.show().html("This is taking longer than expected. "+f);$.ajax(this);return}e="We have tried to add your "+n.typeName+" "+this.retryLimit+" times without success. Our servers are just a little overworked. Sorry.";PostSubmitUI(n,!1);i.show().html(e);return}o=isDebug?GetDebugError(t,r,u):t.status==500?"Oops! There seems to be a server problem. Please try posting your "+n.typeName+" later.":"Oops! There was an unexpected problem adding your "+n.typeName+". Please try again later.";PostSubmitUI(n,!1);i.show().html(o)}})}function PreSubmitUI(n){n.getEditorObject().signalPostingInProgress();$("#new-child-loading").length==0?$("#"+n.containerId).after('<div id="new-child-loading"><img src="/images/loading24.gif" alt="" />&nbsp;<span class="bold">Submitting your '+n.parentTypeName+"<\/span><\/div>"):$("#new-child-loading").show();$("#"+n.containerId).fadeTo("slow",.33);$("#"+n.submitBtnId).attr("disabled",!0);$("#"+n.submitBtnId).css("cursor","wait");$("#"+n.helpTipsId).slideUp()}function PostSubmitUI(n,t,i){$("#new-child-loading").slideUp();t&&i!=null?i():($("#"+n.containerId).fadeTo("normal",1),$("#"+n.submitBtnId).attr("disabled",!1),$("#"+n.submitBtnId).css("cursor","default"))}function GetDebugError(n,t,i){var r="An unexpected error occurred retrieving response.<br />",u,f;return n==null?r:(n.status&&(r+="<b>Response error status<\/b>: "+n.status+".<br />"),t&&(r+="<b>Text-status<\/b>: "+t+".<br />"),i&&i.message&&(u=(i+"").replace(/\\n/g," "),r+='Click <a href="javascript:void(0)" onclick="$(\'#DbgErrorTxt\').toggle()">here<\/a> to show/hide error details.<br />',r+='<div id="DbgErrorTxt" style="display:none">'+u+"<\/div>"),n.responseText&&(f=n.responseText.replace(/\\n/g," "),r+='Click <a href="javascript:void(0)" onclick="$(\'#DbgResponseTxt\').toggle()">here<\/a> to show/hide the response text.<br />',r+='<div id="DbgResponseTxt" style="display:none">'+f+"<\/div>"),r)}function SetCommentConfig(n,t,i,r,u,f){commentConfig.baseUrl=n;commentConfig.saveMethod=t;commentConfig.updateMethod=i;commentConfig.replyMethod=f;commentConfig.deleteMethod=r;commentConfig.getPageMethod=u}function HideAllDialogs(){$("div[id=EditDialogPlaceholder]").html("");$("div[id=ReplyDialogPlaceholder]").html("")}function AttControl(n,t,i,r){this.Watermark=r;this.FreeTextbox=$("#"+t);this.QuickPick=$("#"+i);this.AttrTable=$("#"+n);this.AttrCheckboxes=this.AttrTable.find(".attr :checkbox, .sub-attr :checkbox");this.AttrCheckboxLbls=this.AttrTable.find(".attr label, .sub-attr label");this.GetFreeText=function(){var n=this.FreeTextbox.val();return n==this.Watermark?"":n};this.SetFreeText=function(n){this.FreeTextbox.val(n);this.SetListFromFreeText();n&&this.FreeTextbox.removeClass("watermark")};this.ClearFreeText=function(){this.GetFreeText()&&(this.FreeTextbox.val(""),UpdateWatermark(this.FreeTextbox[0],this.Watermark))};this.ToggleChildAttrsVisibility=function(n){if(!(n<=0)){var t=this.AttrTable.find("div[data-parentId="+n+"]");return $.each(t,function(){$(this).toggle()}),!1}};this.ClearScrollChecks=function(){this.AttrCheckboxes.prop("checked",!1);this.FreeTextbox.length>0&&(this.FreeTextbox.val(""),UpdateWatermark(this.FreeTextbox[0],this.Watermark))};this.IterateCheckboxes=function(){var i,n,t,r;if(this.AttrCheckboxes.prop("checked",!1),i=this.FreeTextbox.val().replace(/[\s]+/g," ").toLowerCase(),n=i.split(","),!(n.length<=0)){for(t=0;t<n.length;t++)n[t]=$.trim(n[t]);r=this.AttrCheckboxLbls.filter(function(){for(var t=0;t<n.length;t++)if($(this).text().toLowerCase()==n[t])return!0});$.each(r,function(){var n=$(this).attr("for");$("#"+n).prop("checked",!0)})}};this.SetListFromFreeText=function(){this.AttrTable.length>0&&this.IterateCheckboxes()};this.OnVersionCheck=function(n,t,i,r){if(this.AttrTable.length>0&&this.FreeTextbox.length>0){if(this.FreeTextbox.val()==this.Watermark&&this.FreeTextbox.val(""),this.FreeTextbox.val(this.FreeTextbox.val().replace(/[\s]+/g," ")),r)(", "+this.FreeTextbox.val()+",").indexOf(", "+i+",")<0&&(this.FreeTextbox.val()?this.FreeTextbox.val(this.FreeTextbox.val()+", "+i):this.FreeTextbox.val(i));else{var u=(", "+this.FreeTextbox.val()+",").indexOf(", "+i+",");u>=0&&this.FreeTextbox.val(this.FreeTextbox.val().substr(0,u)+this.FreeTextbox.val().substr(u+2+i.length))}this.FreeTextbox.val(this.FreeTextbox.val().replace(/^[,\s\xA0]+/,"").replace(/[,\s\xA0]+$/,""));UpdateWatermark(this.FreeTextbox[0],this.Watermark)}this.ToggleChildAttrsVisibility(n)};this.SetFreeTextForQuickPick=function(n,t){n&&t&&this.FreeTextbox.length>0&&($.ajax({context:this,url:t+n.value,success:function(n){n!=null&&this.FreeTextbox.val(n)}}),UpdateWatermark(this.FreeTextbox[0],this.Watermark))};this.GetSelectedAttrIds=function(){var n="";return this.AttrTable.length>0&&this.AttrTable.find(".attr :checkbox:checked, .sub-attr :checkbox:checked").each(function(){n+=$(this).val()+","}),n}}function InitWatermark(n,t){var i=$("#"+n),r;i&&(i.blur(function(){UpdateWatermark(this,t)}),i.focus(function(){UpdateWatermark(this,t)}),r=$.trim(i.val()),r==""||r==t?(i.val(t),i.addClass("watermark")):r!=""&&r!=t&&i.removeClass("watermark"))}function UpdateWatermark(n,t){if(n){var i=$.trim($(n).val());i==t&&$(n).hasClass("watermark")?($(n).val(""),$(n).removeClass("watermark")):i!=""||$(n).hasClass("watermark")?$(n).removeClass("watermark"):($(n).val(t),$(n).addClass("watermark"))}}function scrollToAnchor(n,t){var u,i,r,f;return t=jQuery.extend({speed:1100},t),i=n.indexOf("#"),u=i>0?n.substring(i):n,r=$(u),r.length>0&&(f=r.offset().top,$("html:not(:animated),body:not(:animated)").animate({scrollTop:f},t.speed,function(){window.location.hash=n})),!1}function anchorAnimate(n){$("a.anchorLink").each(function(){var t=this;$(t).click(function(i){i.preventDefault();var e=window.location.href,r=$(t).attr("href"),u,f=r.indexOf("#");return u=f>0?r.substring(f):r,scrollToAnchor(u,n)})})}var Bookmark=function(n,t,i,r,u){var l=this,a=n,o=t,s=i,v=r&&u,f;this.memberLoggedOn=u;var h=function(n){var r=$(n),u=r.attr("data-size"),t,i,e;u==="large"?(t='<div style="width: 32px;height32px;display:inline-block;position:relative"><\/div>',i=.3):u==="medium"?(t='<div style="width: 22px;height22px;display:inline-block;position:relative"><\/div>',i=.18):(t='<div style="width: 16px;height16px;display:inline-block;position:relative"><\/div>',i=.15);r.html(t);r.css("position","relative");e={lines:13,length:32,width:14,radius:23,scale:i,corners:1,opacity:.25,rotate:0,direction:1,speed:1,trail:60,color:"#666",fadeColor:"transparent"};f=new Spinner(e).spin(n)},e=function(n,t,i){var e=$(n),y=e.attr("data-ref"),l=e.attr("data-size"),h=e.attr("data-mode"),a=e.attr("data-enabletooltip")===undefined||e.attr("data-enabletooltip")==="true",r,v,s,f,c;return r=h==="readlater"?t>0?"Added to reading list":i?"Removed from reading list":"Add this to your reading list":t>0?"bookmarked. Click to remove.":i?"bookmark removed":"bookmark this",u||(r+=" (You'll need to be logged in first)"),h!=="readlater"||!1?(f=(i?"un":"")+(h==="readlater"?"readlater":"bookmark"),l==="large"||l==="medium"?(f=o+f+(t>0?"ed48.png":i?"ed48.png":"48.png"),s=24):(f=o+f+(t>0?"ed32.png":i?"ed32.png":"32.png"),s=16),c='<span data-direction="up-right" title="'+r+'" data-enabletooltip="'+a+'" data-tooltip="'+r+'"><img src="'+f+'" style="width:'+s.toString()+"px;height:"+s.toString()+'px;border:none;cursor:pointer;"><\/span>'):(v=t>0?i?"Save":"Saved":"Save",c='<span data-direction="up-right" title="'+r+'" class="read-later" data-enabletooltip="'+a+'" data-tooltip="'+r+'">'+v+"<\/span>"),c},c=function(n){$(n).click(function(n){var r;n.preventDefault();var t=$(this),o=t.attr("data-ref"),u=t.attr("data-mode"),i=t.attr("data-bookmarkId");i&&(i=parseInt(i));r=s.toLowerCase().replace(escape("[ObjectRefGuid]").toLowerCase(),o);i&&i>0?r=r+"&action=remove&bid="+i:u==="readlater"&&(r=r+"&action=readlater");h(this);$.ajax({url:r,dataType:"json",error:function(){f&&f.stop();t.html(e(t,i,i===0))},success:function(n){f&&f.stop();n.success?(t.html(e(t,n.bookmarkId,n.bookmarkId===0)),t.attr("data-bookmarkId",n.bookmarkId.toString()),u==="readlater"&&typeof readingList!="undefined"&&readingList&&readingList.Refresh&&readingList.Refresh(n.bookmarkId>0)):t.html(n.message)}})})};this.Initialise=function(){$(n).each(function(){var n=$(this).attr("data-bookmarkId");n&&(n=parseInt(n));$(this).html(e(this,n,!1));c(this)});autoTooltip&&autoTooltip()}},ReadingList=function(n,t,i,r,u,f){var y=this,e=$("#"+n),o=$("#"+t),s=i,h=r,a=u;this.memberLoggedOn=f;var v=function(n){for(var i='<h3 style="margin:5px 10px">Reading List<\/h3><div id="readinglist" class="reading-list">',t=0;t<n.length;t++)i+='<div class="row list-item"><div class="column8_1"><span data-type="bookmark" data-ref="'+n[t].objectRef+'"   data-size="small" data-mode="bookmark" data-enabletooltip="false"  data-bookmarkId="'+n[t].bookmarkId+'"><\/div><div class="column8_7"><a href="'+n[t].url+'">'+n[t].title+"<\/a><\/div><\/div>";return i+"<\/div>"},c=function(n){$.ajax({type:"POST",async:!0,cache:!1,url:s+"/HasReadingList",data:null,contentType:"application/json; charset=utf-8",dataType:"json",tryCount:0}).done(function(t){var r=t?t.d:null,i;r?(i='<img src="'+h+'book32.png" style="width:20px;height:20px;margin-bottom:-6px" />',n&&(i='<span class="pulse">'+i+"<\/span>"),e.html(i).removeClass("hidden")):e.addClass("hidden")}).fail(function(){e.addClass("hidden");e.html("")})},l=function(){e.populated||e.populating||(e.populating=!0,o.html('<img src="/images/loading16.gif" alt="loading" style="margin:10px 5px;vertical-align:middle;" /> Loading...'),$.ajax({type:"POST",async:!0,cache:!1,url:s+"/GetReadingList",data:null,contentType:"application/json; charset=utf-8",dataType:"json",tryCount:0}).done(function(n){var t=n?n.d:null;o.html(v(t));new Bookmark('#readinglist [data-type="bookmark"]',h,a,!1,f).Initialise();e.populated=!0}).fail(function(){o.html("")}).always(function(){e.populating=!1}))};this.Refresh=function(){e.populated=!1;c(!0);l()};this.initialise=function(){c(!1);$(e).bind("mouseover",l)}},autoTooltip,isDebug,maxRetryLimit,previewHelper,commentConfig,replyDialog,editDialog,processCodeBlocks,lastCursorPos;(function(n){var t,i;n.hasInitialised||(t={escapeRegExp:function(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},hasClass:function(n,t){var i=" ";return n.nodeType===1&&(i+n.className+i).replace(/[\n\t]/g,i).indexOf(i+t+i)>=0},addClass:function(n,t){n.className+=" "+t},removeClass:function(n,t){var i=new RegExp("\\b"+this.escapeRegExp(t)+"\\b");n.className=n.className.replace(i,"")},interpolateString:function(n,t){return n.replace(/{{([a-z][a-z0-9\-_]*)}}/ig,function(){return t(arguments[1])||""})},getCookie:function(n){var i="; "+document.cookie,t=i.split("; "+n+"=");return t.length!=2?undefined:t.pop().split(";").shift()},setCookie:function(n,t,i,r,u){var f=new Date,e;f.setDate(f.getDate()+(i||365));e=[n+"="+t,"expires="+f.toUTCString(),"path="+(u||"/")];r&&e.push("domain="+r);document.cookie=e.join(";")},deepExtend:function(n,t){for(var i in t)t.hasOwnProperty(i)&&(i in n&&this.isPlainObject(n[i])&&this.isPlainObject(t[i])?this.deepExtend(n[i],t[i]):n[i]=t[i]);return n},throttle:function(n,t){var i=!1;return function(){i||(n.apply(this,arguments),i=!0,setTimeout(function(){i=!1},t))}},hash:function(n){var t=0,i,r,u;if(n.length===0)return t;for(i=0,u=n.length;i<u;++i)r=n.charCodeAt(i),t=(t<<5)-t+r|0;return t},normaliseHex:function(n){return n[0]=="#"&&(n=n.substr(1)),n.length==3&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),n},getContrast:function(n){n=this.normaliseHex(n);var t=parseInt(n.substr(0,2),16),i=parseInt(n.substr(2,2),16),r=parseInt(n.substr(4,2),16),u=(t*299+i*587+r*114)/1e3;return u>=128?"#000":"#fff"},getLuminance:function(n){var t=parseInt(this.normaliseHex(n),16),i=38,r=(t>>16)+i,u=(t>>8&255)+i,f=(t&255)+i,e=(16777216+(r<255?r<1?0:r:255)*65536+(u<255?u<1?0:u:255)*256+(f<255?f<1?0:f:255)).toString(16).slice(1);return"#"+e},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},isPlainObject:function(n){return typeof n=="object"&&n!==null&&n.constructor==Object}},n.status={deny:"deny",allow:"allow",dismiss:"dismiss"},n.transitionEnd=function(){var i=document.createElement("div"),n={t:"transitionend",OT:"oTransitionEnd",msT:"MSTransitionEnd",MozT:"transitionend",WebkitT:"webkitTransitionEnd"};for(var t in n)if(n.hasOwnProperty(t)&&typeof i.style[t+"ransition"]!="undefined")return n[t];return""}(),n.hasTransition=!!n.transitionEnd,i=Object.keys(n.status).map(t.escapeRegExp),n.customStyles={},n.Popup=function(){function r(){this.initialise.apply(this,arguments)}function f(n){this.openingTimeout=null;t.removeClass(n,"cc-invisible")}function e(t){t.style.display="none";t.removeEventListener(n.transitionEnd,this.afterTransition);this.afterTransition=null}function c(){var t=this.options.onInitialise.bind(this);if(!window.navigator.cookieEnabled)return t(n.status.deny),!0;if(window.CookiesOK||window.navigator.CookiesOK)return t(n.status.allow),!0;var u=Object.keys(n.status),i=this.getStatus(),r=u.indexOf(i)>=0;return r&&t(i),r}function o(){var t=this.options.position.split("-"),n=[];return t.forEach(function(t){n.push("cc-"+t)}),n}function l(){var i=this.options,r=i.position=="top"||i.position=="bottom"?"banner":"floating",n,u;return t.isMobile()&&(r="floating"),n=["cc-"+r,"cc-type-"+i.type,"cc-theme-"+i.theme,],i.static&&n.push("cc-static"),n.push.apply(n,o.call(this)),u=y.call(this,this.options.palette),this.customStyleSelector&&n.push(this.customStyleSelector),n}function a(){var i={},n=this.options,r,u;return n.showLink||(n.elements.link="",n.elements.messagelink=n.elements.message),Object.keys(n.elements).forEach(function(r){i[r]=t.interpolateString(n.elements[r],function(t){var i=n.content[t];return t&&typeof i=="string"&&i.length?i:""})}),r=n.compliance[n.type],r||(r=n.compliance.info),i.compliance=t.interpolateString(r,function(n){return i[n]}),u=n.layouts[n.layout],u||(u=n.layouts.basic),t.interpolateString(u,function(n){return i[n]})}function u(i){var u=this.options,e=document.createElement("div"),f=u.container&&u.container.nodeType===1?u.container:document.body,r;return e.innerHTML=i,r=e.children[0],r.style.display="none",t.hasClass(r,"cc-window")&&n.hasTransition&&t.addClass(r,"cc-invisible"),this.onButtonClick=v.bind(this),r.addEventListener("click",this.onButtonClick),u.autoAttach&&(f.firstChild?f.insertBefore(r,f.firstChild):f.appendChild(r)),r}function v(r){var u=r.target,f,e;t.hasClass(u,"cc-btn")&&(f=u.className.match(new RegExp("\\bcc-("+i.join("|")+")\\b")),e=f&&f[1]||!1,e&&(this.setStatus(e),this.close(!0)));t.hasClass(u,"cc-close")&&(this.setStatus(n.status.dismiss),this.close(!0));t.hasClass(u,"cc-revoke")&&this.revokeChoice()}function y(n){var r=t.hash(JSON.stringify(n)),u="cc-color-override-"+r,i=t.isPlainObject(n);return this.customStyleSelector=i?u:null,i&&p(r,n,"."+u),i}function p(i,r,u){var h,l,c;if(n.customStyles[i]){++n.customStyles[i].references;return}var s={},f=r.popup,e=r.button,o=r.highlight;f&&(f.text=f.text?f.text:t.getContrast(f.background),f.link=f.link?f.link:f.text,s[u+".cc-window"]=["color: "+f.text,"background-color: "+f.background],s[u+".cc-revoke"]=["color: "+f.text,"background-color: "+f.background],s[u+" .cc-link,"+u+" .cc-link:active,"+u+" .cc-link:visited"]=["color: "+f.link],e&&(e.text=e.text?e.text:t.getContrast(e.background),e.border=e.border?e.border:"transparent",s[u+" .cc-btn"]=["color: "+e.text,"border-color: "+e.border,"background-color: "+e.background],e.background!="transparent"&&(s[u+" .cc-btn:hover, "+u+" .cc-btn:focus"]=["background-color: "+w(e.background)]),o?(o.text=o.text?o.text:t.getContrast(o.background),o.border=o.border?o.border:"transparent",s[u+" .cc-highlight .cc-btn:first-child"]=["color: "+o.text,"border-color: "+o.border,"background-color: "+o.background]):s[u+" .cc-highlight .cc-btn:first-child"]=["color: "+f.text]));h=document.createElement("style");document.head.appendChild(h);n.customStyles[i]={references:1,element:h.sheet};l=-1;for(c in s)s.hasOwnProperty(c)&&h.sheet.insertRule(c+"{"+s[c].join(";")+"}",++l)}function w(n){return(n=t.normaliseHex(n),n=="000000")?"#222":t.getLuminance(n)}function b(i){var f,u,r;t.isPlainObject(i)&&(f=t.hash(JSON.stringify(i)),u=n.customStyles[f],u&&!--u.references&&(r=u.element.ownerNode,r&&r.parentNode&&r.parentNode.removeChild(r),n.customStyles[f]=null))}function s(n,t){for(var i,r=0,u=n.length;r<u;++r)if(i=n[r],i instanceof RegExp&&i.test(t)||typeof i=="string"&&i.length&&i===t)return!0;return!1}function k(){var u=this.setStatus.bind(this),r=this.options.dismissOnTimeout,t,i;typeof r=="number"&&r>=0&&(this.dismissTimeout=window.setTimeout(function(){u(n.status.dismiss)},Math.floor(r)));t=this.options.dismissOnScroll;typeof t=="number"&&t>=0&&(i=function(){window.pageYOffset>Math.floor(t)&&(u(n.status.dismiss),window.removeEventListener("scroll",i),this.onWindowScroll=null)},this.onWindowScroll=i,window.addEventListener("scroll",i))}function d(){var i,f,n,e,r;this.options.type!="info"&&(this.options.revokable=!0);t.isMobile()&&(this.options.animateRevokable=!1);this.options.revokable&&(i=o.call(this),this.options.animateRevokable&&i.push("cc-animate"),this.customStyleSelector&&i.push(this.customStyleSelector),f=this.options.revokeBtn.replace("{{classes}}",i.join(" ")),this.revokeBtn=u.call(this,f),n=this.revokeBtn,this.options.animateRevokable&&(e=!1,r=t.throttle(function(i){var r=!1,u=window.innerHeight-20;t.hasClass(n,"cc-top")&&i.clientY<20&&(r=!0);t.hasClass(n,"cc-bottom")&&i.clientY>u&&(r=!0);r?t.hasClass(n,"cc-active")||t.addClass(n,"cc-active"):t.hasClass(n,"cc-active")&&t.removeClass(n,"cc-active")},200),this.onMouseMove=r,window.addEventListener("mousemove",r)))}var h={enabled:!0,container:null,cookie:{name:"cookieconsent_status",path:"/",domain:"",expiryDays:365},onPopupOpen:function(){},onPopupClose:function(){},onInitialise:function(){},onStatusChange:function(){},onRevokeChoice:function(){},content:{header:"Cookies used on the website!",message:'Like most websites, this website uses cookies to allow functionality such as logging on and customisation. By using our site, you acknowledge that you have read and understand our <a href="/info/cookie.aspx">Cookie Policy<\/a>, <a href="/info/privacy.aspx">Privacy Policy<\/a>, and our <a href="/info/TermsOfUse.aspx">Terms of Service<\/a>.',dismiss:"Got it!",allow:"Allow cookies",deny:"Decline",link:"Learn more",href:"http://cookiesandyou.com",close:"&#x274c;"},elements:{header:'<span class="cc-header">{{header}}<\/span>&nbsp;',message:'<span id="cookieconsent:desc" class="cc-message">{{message}}<\/span>',messagelink:'<span id="cookieconsent:desc" class="cc-message">{{message}} <a aria-label="learn more about cookies" role=button tabindex="0" class="cc-link" href="{{href}}" rel="noopener noreferrer nofollow" target="_blank">{{link}}<\/a><\/span>',dismiss:'<a aria-label="dismiss cookie message" role=button tabindex="0" class="cc-btn cc-dismiss">{{dismiss}}<\/a>',allow:'<a aria-label="allow cookies" role=button tabindex="0"  class="cc-btn cc-allow">{{allow}}<\/a>',deny:'<a aria-label="deny cookies" role=button tabindex="0" class="cc-btn cc-deny">{{deny}}<\/a>',link:'<a aria-label="learn more about cookies" role=button tabindex="0" class="cc-link" href="{{href}}" target="_blank">{{link}}<\/a>',close:'<span aria-label="dismiss cookie message" role=button tabindex="0" class="cc-close">{{close}}<\/span>'},window:'<div role="dialog" aria-live="polite" aria-label="cookieconsent" aria-describedby="cookieconsent:desc" class="cc-window {{classes}}"><!--googleoff: all-->{{children}}<!--googleon: all--><\/div>',revokeBtn:'<div class="cc-revoke {{classes}}">Cookie Policy<\/div>',compliance:{info:'<div class="cc-compliance">{{dismiss}}<\/div>',"opt-in":'<div class="cc-compliance cc-highlight">{{dismiss}}{{allow}}<\/div>',"opt-out":'<div class="cc-compliance cc-highlight">{{deny}}{{dismiss}}<\/div>'},type:"info",layouts:{basic:"{{messagelink}}{{compliance}}","basic-close":"{{messagelink}}{{compliance}}{{close}}","basic-header":"{{header}}{{message}}{{link}}{{compliance}}"},layout:"basic",position:"bottom",theme:"block",static:!1,palette:null,revokable:!1,animateRevokable:!0,showLink:!0,dismissOnScroll:!1,dismissOnTimeout:!1,autoOpen:!0,autoAttach:!0,whitelistPage:[],blacklistPage:[],overrideHTML:null};return r.prototype.initialise=function(n){var i,r,f;this.options&&this.destroy();t.deepExtend(this.options={},h);t.isPlainObject(n)&&t.deepExtend(this.options,n);c.call(this)&&(this.options.enabled=!1);s(this.options.blacklistPage,location.pathname)&&(this.options.enabled=!1);s(this.options.whitelistPage,location.pathname)&&(this.options.enabled=!0);i=this.options.window.replace("{{classes}}",l.call(this).join(" ")).replace("{{children}}",a.call(this));r=this.options.overrideHTML;typeof r=="string"&&r.length&&(i=r);this.options.static?(f=u.call(this,'<div class="cc-grower">'+i+"<\/div>"),f.style.display="",this.element=f.firstChild,this.element.style.display="none",t.addClass(this.element,"cc-invisible")):this.element=u.call(this,i);k.call(this);d.call(this);this.options.autoOpen&&this.autoOpen()},r.prototype.destroy=function(){this.onButtonClick&&this.element&&(this.element.removeEventListener("click",this.onButtonClick),this.onButtonClick=null);this.dismissTimeout&&(clearTimeout(this.dismissTimeout),this.dismissTimeout=null);this.onWindowScroll&&(window.removeEventListener("scroll",this.onWindowScroll),this.onWindowScroll=null);this.onMouseMove&&(window.removeEventListener("mousemove",this.onMouseMove),this.onMouseMove=null);this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element);this.element=null;this.revokeBtn&&this.revokeBtn.parentNode&&this.revokeBtn.parentNode.removeChild(this.revokeBtn);this.revokeBtn=null;b(this.options.palette);this.options=null},r.prototype.open=function(){if(this.element)return this.isOpen()||(n.hasTransition?this.fadeIn():this.element.style.display="",this.options.revokable&&this.toggleRevokeButton(),this.options.onPopupOpen.call(this)),this},r.prototype.close=function(t){if(this.element)return this.isOpen()&&(n.hasTransition?this.fadeOut():this.element.style.display="none",t&&this.options.revokable&&this.toggleRevokeButton(!0),this.options.onPopupClose.call(this)),this},r.prototype.fadeIn=function(){var i=this.element,r,u;n.hasTransition&&i&&(this.afterTransition&&e.call(this,i),t.hasClass(i,"cc-invisible")&&(i.style.display="",this.options.static&&(r=this.element.clientHeight,this.element.parentNode.style.maxHeight=r+"px"),u=20,this.openingTimeout=setTimeout(f.bind(this,i),u)))},r.prototype.fadeOut=function(){var i=this.element;n.hasTransition&&i&&(this.openingTimeout&&(clearTimeout(this.openingTimeout),f.bind(this,i)),t.hasClass(i,"cc-invisible")||(this.options.static&&(this.element.parentNode.style.maxHeight=""),this.afterTransition=e.bind(this,i),i.addEventListener(n.transitionEnd,this.afterTransition),t.addClass(i,"cc-invisible")))},r.prototype.isOpen=function(){return this.element&&this.element.style.display==""&&(n.hasTransition?!t.hasClass(this.element,"cc-invisible"):!0)},r.prototype.toggleRevokeButton=function(n){this.revokeBtn&&(this.revokeBtn.style.display=n?"":"none")},r.prototype.revokeChoice=function(n){this.options.enabled=!0;this.clearStatus();this.options.onRevokeChoice.call(this);n||this.autoOpen()},r.prototype.hasAnswered=function(){return Object.keys(n.status).indexOf(this.getStatus())>=0},r.prototype.hasConsented=function(){var t=this.getStatus();return t==n.status.allow||t==n.status.dismiss},r.prototype.autoOpen=function(){!this.hasAnswered()&&this.options.enabled&&this.open()},r.prototype.setStatus=function(i){var r=this.options.cookie,u=t.getCookie(r.name),f=Object.keys(n.status).indexOf(u)>=0;Object.keys(n.status).indexOf(i)>=0?(t.setCookie(r.name,i,r.expiryDays,r.domain,r.path),this.options.onStatusChange.call(this,i,f)):this.clearStatus()},r.prototype.getStatus=function(){return t.getCookie(this.options.cookie.name)},r.prototype.clearStatus=function(){var n=this.options.cookie;t.setCookie(n.name,"",-1,n.domain,n.path)},r}(),n.Location=function(){function n(n){t.deepExtend(this.options={},r);t.isPlainObject(n)&&t.deepExtend(this.options,n);this.currentServiceIndex=-1}function u(n,t,i){var u,r=document.createElement("script");r.type="text/"+(n.type||"javascript");r.src=n.src||n;r.async=!1;r.onreadystatechange=r.onload=function(){var n=r.readyState;clearTimeout(u);t.done||n&&!/loaded|complete/.test(n)||(t.done=!0,t(),r.onreadystatechange=r.onload=null)};document.body.appendChild(r);u=setTimeout(function(){t.done=!0;t();r.onreadystatechange=r.onload=null},i)}function f(n,t,i,r,u){var f=new(window.XMLHttpRequest||window.ActiveXObject)("MSXML2.XMLHTTP.3.0"),e,s,o;if(f.open(r?"POST":"GET",n,1),f.setRequestHeader("X-Requested-With","XMLHttpRequest"),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),Array.isArray(u))for(e=0,s=u.length;e<s;++e)o=u[e].split(":",2),f.setRequestHeader(o[0].replace(/^\s+|\s+$/g,""),o[1].replace(/^\s+|\s+$/g,""));typeof t=="function"&&(f.onreadystatechange=function(){f.readyState>3&&t(f)});f.send(r)}function i(n){return new Error("Error ["+(n.code||"UNKNOWN")+"]: "+n.error)}var r={timeout:5e3,services:["freegeoip","ipinfo","maxmind"],serviceDefinitions:{freegeoip:function(){return{url:"//freegeoip.net/json/?callback={callback}",isScript:!0,callback:function(n,t){try{var r=JSON.parse(t);return r.error?i(r):{code:r.country_code}}catch(u){return i({error:"Invalid response ("+u+")"})}}}},ipinfo:function(){return{url:"//ipinfo.io",headers:["Accept: application/json"],callback:function(n,t){try{var r=JSON.parse(t);return r.error?i(r):{code:r.country}}catch(u){return i({error:"Invalid response ("+u+")"})}}}},ipinfodb:function(){return{url:"//api.ipinfodb.com/v3/ip-country/?key={api_key}&format=json&callback={callback}",isScript:!0,callback:function(n,t){try{var r=JSON.parse(t);return r.statusCode=="ERROR"?i({error:r.statusMessage}):{code:r.countryCode}}catch(u){return i({error:"Invalid response ("+u+")"})}}}},maxmind:function(){return{url:"//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js",isScript:!0,callback:function(n){if(!window.geoip2){n(new Error("Unexpected response format. The downloaded script should have exported `geoip2` to the global scope"));return}geoip2.country(function(t){try{n({code:t.country.iso_code})}catch(r){n(i(r))}},function(t){n(i(t))})}}}}};return n.prototype.getNextService=function(){var n;do n=this.getServiceByIdx(++this.currentServiceIndex);while(this.currentServiceIndex<this.options.services.length&&!n);return n},n.prototype.getServiceByIdx=function(n){var i=this.options.services[n],r;return typeof i=="function"?(r=i(),r.name&&t.deepExtend(r,this.options.serviceDefinitions[r.name](r)),r):typeof i=="string"?this.options.serviceDefinitions[i]():t.isPlainObject(i)?this.options.serviceDefinitions[i.name](i):null},n.prototype.locate=function(n,t){var i=this.getNextService();if(!i){t(new Error("No services to run"));return}this.callbackComplete=n;this.callbackError=t;this.runService(i,this.runNextServiceOnError.bind(this))},n.prototype.setupUrl=function(n){var t=this.getCurrentServiceOpts();return n.url.replace(/\{(.*?)\}/g,function(i,r){if(r==="callback"){var u="callback"+Date.now();return window[u]=function(t){n.__JSONP_DATA=JSON.stringify(t)},u}if(r in t.interpolateUrl)return t.interpolateUrl[r]})},n.prototype.runService=function(n,t){var i=this,r,e;n&&n.url&&n.callback&&(r=n.isScript?u:f,e=this.setupUrl(n),r(e,function(r){var u=r?r.responseText:"";n.__JSONP_DATA&&(u=n.__JSONP_DATA,delete n.__JSONP_DATA);i.runServiceCallback.call(i,t,n,u)},this.options.timeout,n.data,n.headers))},n.prototype.runServiceCallback=function(n,t,i){var u=this,f=function(t){r||u.onServiceResult.call(u,n,t)},r=t.callback(f,i);r&&this.onServiceResult.call(this,n,r)},n.prototype.onServiceResult=function(n,t){t instanceof Error||t&&t.error?n.call(this,t,null):n.call(this,null,t)},n.prototype.runNextServiceOnError=function(n,t){if(n){this.logError(n);var i=this.getNextService();i?this.runService(i,this.runNextServiceOnError.bind(this)):this.completeService.call(this,this.callbackError,new Error("All services failed"))}else this.completeService.call(this,this.callbackComplete,t)},n.prototype.getCurrentServiceOpts=function(){var n=this.options.services[this.currentServiceIndex];return typeof n=="string"?{name:n}:typeof n=="function"?n():t.isPlainObject(n)?n:{}},n.prototype.completeService=function(n,t){this.currentServiceIndex=-1;n&&n(t)},n.prototype.logError=function(n){var t=this.currentServiceIndex,i=this.getServiceByIdx(t);console.error("The service["+t+"] ("+i.url+") responded with the following error",n)},n}(),n.Law=function(){function n(){this.initialise.apply(this,arguments)}var i={showForAllRegions:!1,regionalLaw:!0,hasLaw:["AT","BE","BG","HR","CZ","CY","DK","EE","FI","FR","DE","EL","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","SK","SI","ES","SE","GB","UK"],revokable:["HR","CY","DK","EE","FR","DE","LV","LT","NL","PT","ES"],explicitAction:["HR","IT","ES"]};return n.prototype.initialise=function(n){t.deepExtend(this.options={},i);t.isPlainObject(n)&&t.deepExtend(this.options,n)},n.prototype.get=function(n){var t=this.options;return{hasLaw:t.hasLaw.indexOf(n)>=0,revokable:t.revokable.indexOf(n)>=0,explicitAction:t.explicitAction.indexOf(n)>=0}},n.prototype.applyLaw=function(n,t){var i=this.get(t);return this.options.showForAllRegions||i.hasLaw||(n.enabled=!1),this.options.regionalLaw&&(i.revokable&&(n.revokable=!0),i.explicitAction&&(n.dismissOnScroll=!1,n.dismissOnTimeout=!1)),n},n}(),n.initialise=function(t,i,r){var u=new n.Law(t.law);i||(i=function(){});r||(r=function(){});n.getCountryCode(t,function(r){delete t.law;delete t.location;r.code&&(t=u.applyLaw(t,r.code));i(new n.Popup(t))},function(i){delete t.law;delete t.location;r(i,new n.Popup(t))})},n.getCountryCode=function(t,i,r){if(t.law&&t.law.countryCode){i({code:t.law.countryCode});return}if(t.location){var u=new n.Location(t.location);u.locate(function(n){i(n||{})},r);return}i({})},n.utils=t,n.hasInitialised=!0,window.cookieconsent=n)})(window.cookieconsent||{});var navBarMenu=new NavBarMenu("navBarMenu",".navmenu li"),signinMenu=new NavBarMenu("signinMenu",".member-signin"),memberLinksMenu=new NavBarMenu("memberLinksMenu",".member-links"),notificationsMenu=new NavBarMenu("notificationsMenu",".notification-count");$(document).ready(function(){navBarMenu.InitMenu();signinMenu.InitMenu();memberLinksMenu.InitMenu();notificationsMenu.InitMenu()}),function(n,t){typeof module=="object"&&module.exports?module.exports=t():typeof define=="function"&&define.amd?define(t):n.Spinner=t()}(this,function(){"use strict";function i(n,t){var i=document.createElement(n||"div");for(var r in t)i[r]=t[r];return i}function t(n){for(var t=1,i=arguments.length;t<i;t++)n.appendChild(arguments[t]);return n}function a(n,t,i,r){var e=["opacity",t,~~(n*100),i,r].join("-"),o=.01+i/r*100,s=Math.max(1-(1-n)/t*(100-o),n),c=u.substring(0,u.indexOf("Animation")).toLowerCase(),l=c&&"-"+c+"-"||"";return h[e]||(f.insertRule("@"+l+"keyframes "+e+"{0%{opacity:"+s+"}"+o+"%{opacity:"+n+"}"+(o+.01)+"%{opacity:1}"+(o+t)%100+"%{opacity:"+n+"}100%{opacity:"+s+"}}",f.cssRules.length),h[e]=1),e}function o(n,t){var u=n.style,r,i;if(t=t.charAt(0).toUpperCase()+t.slice(1),u[t]!==undefined)return t;for(i=0;i<s.length;i++)if(r=s[i]+t,u[r]!==undefined)return r}function n(n,t){for(var i in t)n.style[o(n,i)||i]=t[i];return n}function c(n){for(var r,i,t=1;t<arguments.length;t++){r=arguments[t];for(i in r)n[i]===undefined&&(n[i]=r[i])}return n}function l(n,t){return typeof n=="string"?n:n[t%n.length]}function r(n){this.opts=c(n||{},r.defaults,v)}function y(){function u(n,t){return i("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}f.addRule(".spin-vml","behavior:url(#default#VML)");r.prototype.lines=function(i,r){function s(){return n(u("group",{coordsize:o+" "+o,coordorigin:-e+" "+-e}),{width:o,height:o})}function a(i,f,o){t(c,t(n(s(),{rotation:360/r.lines*i+"deg",left:~~f}),t(n(u("roundrect",{arcsize:r.corners}),{width:e,height:r.scale*r.width,left:r.scale*r.radius,top:-r.scale*r.width>>1,filter:o}),u("fill",{color:l(r.color,i),opacity:r.opacity}),u("stroke",{opacity:0}))))}var e=r.scale*(r.length+r.width),o=r.scale*2*e,h=-(r.width+r.length)*r.scale*2+"px",c=n(s(),{position:"absolute",top:h,left:h}),f;if(r.shadow)for(f=1;f<=r.lines;f++)a(f,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(f=1;f<=r.lines;f++)a(f);return t(i,c)};r.prototype.opacity=function(n,t,i,r){var u=n.firstChild;r=r.shadow&&r.lines||0;u&&t+r<u.childNodes.length&&(u=u.childNodes[t+r],u=u&&u.firstChild,u=u&&u.firstChild,u&&(u.opacity=i))}}var s=["webkit","Moz","ms","O"],h={},u,f,v={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:1/4,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"},e;return r.defaults={},c(r.prototype,{spin:function(t){this.stop();var f=this,r=f.opts,e=f.el=i(null,{className:r.className});if(n(e,{position:r.position,width:0,zIndex:r.zIndex,left:r.left,top:r.top}),t&&t.insertBefore(e,t.firstChild||null),e.setAttribute("role","progressbar"),f.lines(e,f.opts),!u){var s=0,l=(r.lines-1)*(1-r.direction)/2,h,c=r.fps,o=c/r.speed,a=(1-r.opacity)/(o*r.trail/100),v=o/r.lines;(function y(){s++;for(var n=0;n<r.lines;n++)h=Math.max(1-(s+(r.lines-n)*v)%o*a,r.opacity),f.opacity(e,n*r.direction+l,h,r);f.timeout=f.el&&setTimeout(y,~~(1e3/c))})()}return f},stop:function(){var n=this.el;return n&&(clearTimeout(this.timeout),n.parentNode&&n.parentNode.removeChild(n),this.el=undefined),this},lines:function(r,f){function s(t,r){return n(i(),{position:"absolute",width:f.scale*(f.length+f.width)+"px",height:f.scale*f.width+"px",background:t,boxShadow:r,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*e+f.rotate)+"deg) translate("+f.scale*f.radius+"px,0)",borderRadius:(f.corners*f.scale*f.width>>1)+"px"})}for(var e=0,h=(f.lines-1)*(1-f.direction)/2,o;e<f.lines;e++)o=n(i(),{position:"absolute",top:1+~(f.scale*f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:u&&a(f.opacity,f.trail,h+e*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&t(o,n(s("#000","0 0 4px #000"),{top:"2px"})),t(r,t(o,s(l(f.color,e),"0 0 1px rgba(0,0,0,.1)")));return r},opacity:function(n,t,i){t<n.childNodes.length&&(n.childNodes[t].style.opacity=i)}}),typeof document!="undefined"&&(f=function(){var n=i("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),e=n(i("group"),{behavior:"url(#default#VML)"}),!o(e,"transform")&&e.adj?y():u=o(e,"animation")),r}),function(n){n.sticky=function(t,i,r){function s(){if(u){var t=u.offset(),n={};return(n.isStickyRequired=r==="top",n.top=t.top,n.left=t.left,n.position=u.css("position"),n.top===-1)?null:n}}function c(){f&&(u.css("position",f.position),u.css("top",f.top),u.css("left",f.left),u.removeClass("stuck"),o=!1)}function l(n){var t=n.offset();return t.width=n.outerWidth(!0),t.height=n.outerHeight(!0),t.right=t.left+t.width,t.bottom=t.top+t.height,t}var e=this,u=n(t),h=10,o=!1,f;e.ReGetOriginalLayout=function(){f&&(c(),f=s(),e.RepositionStickyElement())};e.RepositionStickyElement=function(){var t,a,r,e;i&&i.length&&(t=l(i));a=n(window).scrollTop();r=l(u);t&&r.bottom>t.top?e=r.top-(r.bottom-t.top)-a:a+h>=f.top?e=h:o||(f=s());e&&t&&a+e+r.height>t.top&&(e=r.top-(r.bottom-t.top)-a);e?(u.css("position","fixed"),u.css("top",e),u.css("left",f.left-n(window).scrollLeft()),u.addClass("stuck"),o=!0):c()};e.init=function(){r=r||"top";u&&(f=s(),n(window).bind("resize",e.ReGetOriginalLayout),n(window).bind("scroll",e.RepositionStickyElement))};e.init()};n.fn.sticky=function(t,i){return this.each(function(){new n.sticky(this,t,i)})}}(jQuery);Date.prototype.stdTimezoneOffset=function(){var n=new Date(this.getFullYear(),0,1),t=new Date(this.getFullYear(),6,1);return Math.max(n.getTimezoneOffset(),t.getTimezoneOffset())};Date.prototype.dst=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()};autoTooltip=function(n){"use strict";var t=function(n){var t=n||$(this),u=t.attr("data-width")||"150px",i=t.attr("data-direction")||"up",r=t.attr("data-tooltip");r&&(t.children(".speech-bubble-container-"+i).remove(),t.addClass("tooltip"),t.attr("title",""),t.append('<div class="speech-bubble-container-'+i+'" style="width:'+u+'">  <div class="speech-bubble-'+i+'" style="text-align:center"> '+r+'<\/div>  <div class="speech-bubble-pointer-'+i+'">    <div class="speech-bubble-pointer-'+i+'-inner"><\/div>  <\/div><\/div>'))};n?t(n):$('[data-enabletooltip="true"]').each(function(){t($(this))})};$(document).ready(function(){autoTooltip()});isDebug=!1;maxRetryLimit=3;previewHelper={};commentConfig={baseUrl:"/script/comments/webservices/commentServices.aspx/",saveMethod:"SaveComment",updateMethod:"UpdateComment",replyMethod:"ReplyToComment",deleteMethod:"DeleteComment",getPageMethod:"GetPage"};replyDialog='\t<div id="CommentReplyForm" class="comment-reply-form" >\t\t<div class="padded-top subdue">\t\t\tEnter your reply below and click the Submit button.\t\t<\/div>\t\t<textarea id="ReplyText" cols="50" rows="4"><\/textarea><br />\t\t<input type="button" value="Submit" id="SubmitReply" name="CP-SubmitReply" class="comment-button"  />\t\t<input type="button" value="Cancel" id="CancelReply" name="CP-CancelReply" class="comment-button"  />\t\t<br />\t<\/div> ';editDialog='<div id="CommentEditForm" class="comment-edit-form" >\t\t<div class="padded-top subdue">\t\t\tEdit your comment below and click the Submit button.\t\t<\/div>\t\t<textarea id="EditText" cols="50" rows="4"><\/textarea><br />\t\t<input type="button" value="Submit" id="SubmitEdit" name="CP-SubmitEdit" class="comment-button" />\t\t<input type="button" value="Cancel" id="CancelEdit" name="CP-CancelEdit" class="comment-button" />\t\t<br />\t<\/div>';$(function(){function t(n,t){t.d.status=="OK"&&($("div[name=CP-CommentList]",n).html(t.d.html),$(".comment-commands, .comment-commands a",n).removeClass("invisible"),u(),e(),f())}function l(n,t){if(!(n.length<=0)){typeof t=="undefined"&&(t=!0);var i=n.offset().top,r=document.documentElement.clientHeight/10;t?$("html, body").animate({scrollTop:i-r},"fast"):$("html, body").scrollTop(i-r)}}var n=250,i,r;$(".container-comments").each(function(){var i=$(this);$(".comment-button-bar",i).show();$(".comment-commands, .comment-commands a",i).removeClass("invisible");$("a[id$=ShowAllButton]",i).show();$("a[id$=AddCommentButton]",i).click(function(){var t=$(this).parent().parent();return $(".comment-button-bar",t).hide(n),$(".comment-add-form",t).show(n,function(){$("textarea[id$=CommentText]",$(this)).focus()}),!1});$("input[id$=CancelCommentButton]",i).click(function(){var t=$(this).parent().parent();return $(".comment-button-bar",t).show(),$(".comment-add-form",t).hide(n),!1});$("input[id$=SubmitCommentButton]",i).click(function(){var i=$(this).parents(".container-comments"),r=$.trim($("textarea[id$=CommentText]",i).val()),u,f;return r=encodeURIComponent(r),r&&r!=""&&(u=i.find("a[id$=HideUnavailable]:visible").length>0,f='{ "objectRef": "'+i.attr("ObjectRef")+'","boldMemberId": "'+i.attr("BoldMemberId")+'", "pageSize": "'+i.attr("PageSize")+'", "showAll": "'+(u==!0?"true":"false")+'", "comment": "'+r+'" }',$.ajax({type:"POST",cache:!1,url:commentConfig.baseUrl+commentConfig.saveMethod,data:f,contentType:"application/json; charset=utf-8",dataType:"json",tryCount:0,retryLimit:3,timeout:5e3,success:function(n){n.d.status=="OK"&&(t(i,n),$("textarea[id$=CommentText]",i).val(""))},error:function(n,t){if(t=="timeout"){if(this.tryCount++,this.tryCount<=this.retryLimit){$.ajax(this);return}alert("We have tried to add your comment "+this.retryLimit+" times without success. Our servers are just a little overworked. Sorry.");return}n.status==500?alert("Oops! There seems to be a server problem, please try posting your comment later."):alert("Oops! There was a problem adding your comment, sorry.")}})),$(".comment-button-bar",i).show(),$(".comment-add-form",i).hide(n),!1})});var u=function(){$(".container-comments a[id$=DeleteButton]").click(function(){var n,i,r,u;return confirm("Are you sure you wish to delete this comment?")&&(n=$(this).parents(".container-comments"),i=$(this).parents(".comment-item"),i!=undefined&&i.length>0&&(r=n.find("a[id$=HideUnavailable]:visible").length>0,u='{ "commentId": "'+i.attr("commentId")+'","boldMemberId": "'+n.attr("BoldMemberId")+'", "showAll": "'+(r==!0?"true":"false")+'", "pageSize": "'+n.attr("PageSize")+'", "pageNumber": "'+n.attr("PageNumber")+'" }',$.ajax({type:"POST",cache:!1,url:commentConfig.baseUrl+commentConfig.deleteMethod,data:u,contentType:"application/json; charset=utf-8",dataType:"json",success:function(i){i.d.status=="OK"&&t(n,i)}}))),!1})},f=function(){$(".container-comments a[name=CP-EditComment]").click(function(){var r;HideAllDialogs();var t=$(this).parents(".comment-item"),e=$(this).parents(".container-comments"),h=e.attr("ModifyStatus")=="True",i=$(this).parents(".comment-item"),n=$(".comment-content",t).html();n=n.replace(/\n/ig,"");n=n.replace(/\<br\>\s*&nbsp;\s*\<br\>/ig,"<br><br>");n=n.replace(/\<br\>/ig,"\n");r=i.find("div[id=ReplyDialogPlaceholder]");r.html(editDialog);var u=i.find("#CommentEditForm"),f=u.find("textarea[id=EditText]"),c=u.find("select[id=EditStatus]");return $(f).text(n),f.focus(),$(c).val($("span[id$=PubStatus]",t).text()).attr("disabled",h?"":"disabled"),o(),s(),!1})},o=function(){$(".container-comments input[name=CP-CancelEdit]").click(function(){return HideAllDialogs(),$("textarea[id=EditText]").text(""),!1})},s=function(){$(".container-comments input[name=CP-SubmitEdit]").click(function(){var n=$(this).parents(".comment-item"),i=$(n).parents(".container-comments"),r=$("textarea[id=EditText]",n).val();r=encodeURIComponent(r);var u=$("select[id=EditStatus]",n).val()||"",f=i.find("a[id$=HideUnavailable]:visible").length>0,e='{ "commentId": "'+n.attr("commentId")+'","comment": "'+r+'", "pubStatus": "'+u+'", "boldMemberId": "'+i.attr("BoldMemberId")+'", "showAll": "'+(f==!0?"true":"false")+'", "pageSize": "'+i.attr("PageSize")+'", "pageNumber": "'+i.attr("PageNumber")+'" }';HideAllDialogs();$("textarea[id=EditText]").val("");$.ajax({type:"POST",cache:!1,url:commentConfig.baseUrl+commentConfig.updateMethod,data:e,contentType:"application/json; charset=utf-8",dataType:"json",tryCount:0,retryLimit:3,timeout:5e3,success:function(r){r.d.status=="OK"&&(t(i,r),n=null)},error:function(n,t){if(t=="timeout"){if(this.tryCount++,this.tryCount<=this.retryLimit){$.ajax(this);return}alert("We have tried to update your comment "+this.retryLimit+" times without success. Our servers are just a little overworked. Sorry.");return}n.status==500?alert("Oops! There seems to be a server problem, please try posting your comment later."):alert("Oops! There was a problem updating your comment, sorry.")}})})},e=function(){$(".container-comments a[name=CP-ReplyComment]").click(function(){var t;HideAllDialogs();var n=$(this).parent().parent(),i=n.attr("authorId"),r=n.parent().parent().attr("CurrentMemberId");if(i!=r||confirm("Are you sure you want to reply to your own comment?"))return t=n.find("div[id=ReplyDialogPlaceholder]"),t.html(replyDialog),h(),c(),n.find("textarea[id=ReplyText]").val("").focus(),!1})},h=function(){$(".container-comments input[name=CP-CancelReply]").click(function(){var n=$(this).parent().parent(),t=n.find("#CommentReplyForm");return HideAllDialogs(),$("textarea[id=ReplyText]").val(""),!1})},c=function(){$(".container-comments input[name=CP-SubmitReply]").click(function(){var i=$(this).parents(".comment-item"),n=$(i).parents(".container-comments"),r=$("textarea[id=ReplyText]",i).val();r=encodeURIComponent(r);var u=n.find("a[id$=HideUnavailable]:visible").length>0,f=i.attr("commentId"),e='{ "parentCommentId": "'+f+'","objectRef": "'+n.attr("ObjectRef")+'","comment": "'+r+'", "boldMemberId": "'+n.attr("BoldMemberId")+'", "showAll": "'+(u==!0?"true":"false")+'", "pageSize": "'+n.attr("PageSize")+'", "pageNumber": "'+n.attr("PageNumber")+'" }';HideAllDialogs();$("textarea[id=ReplyText]").val("");$.ajax({type:"POST",cache:!1,url:commentConfig.baseUrl+commentConfig.replyMethod,data:e,contentType:"application/json; charset=utf-8",dataType:"json",tryCount:0,retryLimit:3,timeout:5e3,success:function(r){r.d.status=="OK"&&(t(n,r),i=null)},error:function(n,t){if(t=="timeout"){if(this.tryCount++,this.tryCount<=this.retryLimit){$.ajax(this);return}alert("We have tried to update your comment "+this.retryLimit+" times without success. Our servers are just a little overworked. Sorry.");return}n.status==500?alert("Oops! There seems to be a server problem, please try posting your comment later."):alert("Oops! There was a problem updating your comment, sorry.")}})})};$(".container-comments .Pager a[PageNumber]").click(function(){var n=$(this).parents(".container-comments"),i=n.find("a[id$=HideUnavailable]:visible").length>0,r='{ "objectRef": "'+n.attr("ObjectRef")+'","boldMemberId": "'+n.attr("BoldMemberId")+'", "showAll": "'+(i==!0?"true":"false")+'", "pageSize": "'+n.attr("PageSize")+'", "pageNumber": "'+$(this).attr("PageNumber")+'","pagingAction": "Current" }';return $.ajax({type:"POST",cache:!1,url:commentConfig.baseUrl+commentConfig.getPageMethod,data:r,contentType:"application/json; charset=utf-8",dataType:"json",success:function(i){t(n,i)}}),!1});$(".container-comments a[id$=ShowAllButton], .container-comments a[id$=HideUnavailable]").click(function(){var r=this,i=$(this).parents(".container-comments"),u=i.find("a[id$=HideUnavailable]:visible").length>0,f='{ "objectRef": "'+i.attr("ObjectRef")+'","boldMemberId": "'+i.attr("BoldMemberId")+'", "showAll": "'+(u==!0?"false":"true")+'", "pageSize": "'+i.attr("PageSize")+'", "pageNumber": "1","pagingAction": "Current" }';return $.ajax({type:"POST",cache:!1,url:commentConfig.baseUrl+commentConfig.getPageMethod,data:f,contentType:"application/json; charset=utf-8",dataType:"json",success:function(u){t(i,u);$("a[id$=ShowAllButton], a[id$=HideUnavailable]",i).show(n);$(r).hide(n)}}),!1});u();e();f();i=window.location.hash.length>3?window.location.hash.substr(4):null;i&&(r=$("#cmt-jump-"+i),r.length>0&&setTimeout(function(n){l(n,!0);n.parent().parent().addClass("selected")},500,r))});processCodeBlocks=new function(){var n=400,t=!1,r=function(n){var t;return n?(t=n,t=t.replace(/\<span class="code-linenumber"\>[\s\d]*\<\/span\>/gi,""),t=$("<div/>").html(t).text().trim(),t.replace(/\r\n\r\n\r\n\r\n/,"\r\n\r\n")):null},u=function(n){switch(n.toLowerCase()){case"text":return"Plain Text";case"aspnet":return"ASP.NET";case"cs":return"C#";case"c++":return"C++";case"vb.net":return"VB.NET";case"mc++":return"C++ / CLI";case"css":return"CSS";case"delphi":return"Delphi";case"F#":return"F#";case"html":return"HTML";case"java":return"Java";case"jscript":return"Javascript";case"asm":return"MASM / ASM";case"msil":return"MSIL";case"midl":return"MIDL";case"php":return"PHP";case"sql":return"SQL";case"vbscript":return"VBScript";case"xml":return"XML"}return n},i=function(i,r){var u,f,e,o,s;if(!i.attr("decoration")||i.attr("decoration").toLowerCase()!=="none"){if(u=i.height(),f=i.attr("id"),f&&f.length>3&&f.substring(0,3)=="pre")if(r=parseInt(f.substring(3)),r>=0&&u>0)$("#premain"+r.toString()).empty().remove();else return;else r=Math.floor(Math.random()*1e6+1),i.attr("id","pre"+r.toString());typeof r=="number"&&(i.css("margin-top","0"),e="<div class='pre-action-link' id='premain"+r.toString()+"'  style='width:100%;display:block;'>",e+="<span id='prehide"+r.toString()+"'    onclick='processCodeBlocks.togglePre("+r.toString()+");'>Hide<\/span>  &nbsp; ",(u<=0||u>n)&&(o="/images/arrow-up-16.png",s="Shrink",t&&u>0&&(o="/images/arrow-down-16.png",s="Expand"),e+="<span id='preShrink"+r.toString()+"'    onclick='processCodeBlocks.shrinkExpand("+r.toString()+");'>"+s+"<\/span> <img id='preimg"+r.toString()+"' src='"+o+"'    style='height:16px;width:16px'    onclick='processCodeBlocks.shrinkExpand("+r.toString()+");' />  &nbsp; ",t&&u>0&&(i.css("overflow","auto"),i.height(n),i.attr("shrunk","true")),u>0&&!i.attr("processed","true")),e+="<span id='copycode"+r.toString()+"' onclick='return processCodeBlocks.copyCode("+r.toString()+");'>Copy Code<\/span><\/div>",i.before(e),i.height()>0&&(i.collapsable=!0))}},f=function(n){n.addClass("notranslate")};this.Initialise=function(r,e,o){n=e||n;t=!!o;$(r+" div.code-samples").each(function(n){var t=$(this),r=t.children("pre"),i;if(r.length>1){var e="divTab"+n.toString(),o="codesampletab"+n.toString(),f=$("<div id='"+o+"' class='clearfix'><\/div>").insertAfter(t);$("<ul id='codetab"+n+"'><\/ul>").appendTo(f);i="";r.each(function(){var t=$(this),r=e+t.attr("lang").replace("#","sharp").replace("+","plus").replace(/[^a-zA-Z0-9]/,"");$("<li><a href='#"+r+"'><span>"+u(t.attr("lang"))+"<\/span><\/a><\/li>").appendTo("#codetab"+n);i+="<div id='"+r+"'><a name='"+r+"'><\/a><pre>"+t.html()+"<\/pre><\/div>"});$(i).insertAfter("#codetab"+n);t.hide();f.tabs()}});$(r+" pre").each(function(n){i($(this),n);f($(this),n)});var s=document.createElement("style");s.type="text/css";s.innerHTML=".copied::after {  position: absolute;  display: inline-block;  content: 'copied'; color: #fff; background-color: #f90;  border-radius: 3px; padding:1px 3px; opacity: 0;  will-change: opacity, transform; animation: showcopied 1.5s ease; } @keyframes showcopied { 0% { opacity: 0; transform: translateX(-100%); } 70% { opacity: 1; transform: translateX(0); } 100% { opacity: 0; } } ";document.body.appendChild(s)};this.setupCollapsableCode=function(n){$(n).find("PRE").each(function(){i($(this))})};this.togglePre=function(n){var t=$("#pre"+n),i=$("#prehide"+n);t.toggle();t.css("display")==="none"?i.text(" Show"):i.text(" Hide")};this.shrinkExpand=function(t){var i=$("#pre"+t),r=$("#preimg"+t),u=$("#preShrink"+t);i.attr("shrunk")==="true"?(r.attr("src","/images/arrow-up-16.png"),u.text(" Shrink"),i.attr("shrunk","false"),i.height("auto")):(r.attr("src","/images/arrow-down-16.png"),u.text(" Expand"),i.attr("shrunk","true"),i.animate({height:Math.min(n,i.height())},"fast"))};this.copyCode=function(n){var u=$("#pre"+n.toString()),t=u.html(),i;return t?(t=r(t),!t)?!1:(this.copyTextToClipboard(t),i=$("#copycode"+n.toString()),i.addClass("copied"),setTimeout(function(){i.removeClass("copied")},1500),!1):!1};this.copyTextToClipboard=function(n){var t=document.createElement("textarea"),i,r;t.style.position="fixed";t.style.top=0;t.style.left=0;t.style.width="2em";t.style.height="2em";t.style.padding=0;t.style.border="none";t.style.outline="none";t.style.boxShadow="none";t.style.background="transparent";t.value=n;document.body.appendChild(t);t.select();try{i=document.execCommand("copy");r=i?"successful":"unsuccessful";console.log("Copying text command was "+r)}catch(u){console.log("Oops, unable to copy")}document.body.removeChild(t)}};lastCursorPos=0,function(n){n.fn.extend({autocomplete:function(t,i){var r=typeof t=="string";return i=n.extend({},n.Autocompleter.defaults,{url:r?t:null,data:r?null:t,delay:r?n.Autocompleter.defaults.delay:10,max:i&&!i.scroll?10:150},i),i.highlight=i.highlight||function(n){return n},i.formatMatch=i.formatMatch||i.formatItem,this.each(function(){new n.Autocompleter(this,i)})},result:function(n){return this.bind("result",n)},search:function(n){return this.trigger("search",[n])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(n){return this.trigger("setOptions",[n])},unautocomplete:function(){return this.trigger("unautocomplete")}});n.Autocompleter=function(t,i){function d(){var h=u.selected(),f,o,a,c,y,l;return h?(f=h.result,e=f,i.multiple&&(o=s(r.val()),o.length>1&&(a=i.multipleSeparator.length,c=n(t).selection().start,c<=0&&(c=lastCursorPos),l=0,n.each(o,function(n,t){if(l+=t.length,c<=l)return y=n,!1;l+=a}),o[y]=f,f=o.join(i.multipleSeparator)),f+=i.multipleSeparator),r.val(f),v(),r.trigger("result",[h.data,h.value]),!0):!1}function o(n,t){if(y==f.DEL){u.hide();return}var o=r.val();(t||o!=e)&&(e=o,o=a(o),o.length>=i.minChars?(r.addClass(i.loadingClass),i.matchCase||(o=o.toLowerCase()),g(o,it,v)):(w(),u.hide()))}function s(t){return t?i.multiple?n.map(t.split(i.multipleSeparator),function(i){return n.trim(t).length?n.trim(i):null}):[n.trim(t)]:[""]}function a(r){var u,f;return i.multiple?(u=s(r),u.length==1)?u[0]:(f=n(t).selection().start,u=f==r.length?s(r):s(r.replace(r.substring(f),"")),u[u.length-1]):r}function nt(u,o){i.autoFill&&a(r.val()).toLowerCase()==u.toLowerCase()&&y!=f.BACKSPACE&&(r.val(r.val()+o.substring(a(e).length)),n(t).selection(e.length,e.length+o.length))}function tt(){clearTimeout(h);h=setTimeout(v,200)}function v(){var n=u.visible();u.hide();clearTimeout(h);w();i.mustMatch&&r.search(function(n){if(!n)if(i.multiple){var t=s(r.val()).slice(0,-1);r.val(t.join(i.multipleSeparator)+(t.length?i.multipleSeparator:""))}else r.val(""),r.trigger("result",null)})}function it(n,t){t&&t.length&&c?(w(),u.display(t,n),nt(n,t[0].value),u.show()):v()}function g(r,f,e){var o,s;i.matchCase||(r=r.toLowerCase());o=l.load(r);o&&o.length?f(r,o):typeof i.url=="string"&&i.url.length>0?(s={timestamp:+new Date},n.each(i.extraParams,function(n,t){s[n]=typeof t=="function"?t():t}),n.ajax({mode:"abort",port:"autocomplete"+t.name,dataType:i.dataType,url:i.url,data:n.extend({q:a(r),limit:i.max},s),success:function(n){var t=i.parse&&i.parse(n)||rt(n);l.add(r,t);f(r,t)}})):(u.emptyList(),e(r))}function rt(t){for(var r,u=[],e=t.split("\n"),f=0;f<e.length;f++)r=n.trim(e[f]),r&&(r=r.split("|"),u[u.length]={data:r,value:r[0],result:i.formatResult&&i.formatResult(r,r[0])||r[0]});return u}function w(){r.removeClass(i.loadingClass)}var f={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},r=n(t).attr("autocomplete","off").addClass(i.inputClass),h,e="",l=n.Autocompleter.Cache(i),c=0,y,b={mouseDownOnSelect:!1},u=n.Autocompleter.Select(i,t,d,b),k=navigator.userAgent.indexOf("Opera"),p;k&&n(t.form).bind("submit.autocomplete",function(){if(p)return p=!1,!1});r.bind((k?"keypress":"keydown")+".autocomplete",function(t){c=1;y=t.keyCode;switch(t.keyCode){case f.UP:t.preventDefault();u.visible()?u.prev():o(0,!0);break;case f.DOWN:t.preventDefault();u.visible()?u.next():o(0,!0);break;case f.PAGEUP:t.preventDefault();u.visible()?u.pageUp():o(0,!0);break;case f.PAGEDOWN:t.preventDefault();u.visible()?u.pageDown():o(0,!0);break;case i.multiple&&n.trim(i.multipleSeparator)==","&&f.COMMA:case f.TAB:case f.RETURN:if(d())return t.preventDefault(),p=!0,!1;break;case f.ESC:u.hide();break;default:clearTimeout(h);h=setTimeout(o,i.delay)}}).keypress(function(){lastCursorPos=r.selection().start}).mouseup(function(){lastCursorPos=r.selection().start}).focus(function(){c++}).blur(function(){c=0;b.mouseDownOnSelect||tt()}).click(function(){c++>1&&!u.visible()&&o(0,!0)}).bind("search",function(){function i(n,i){var u,f;if(i&&i.length)for(f=0;f<i.length;f++)if(i[f].result.toLowerCase()==n.toLowerCase()){u=i[f];break}typeof t=="function"?t(u):r.trigger("result",u&&[u.data,u.value])}var t=arguments.length>1?arguments[1]:null;n.each(s(r.val()),function(n,t){g(t,i,i)})}).bind("flushCache",function(){l.flush()}).bind("setOptions",function(){n.extend(i,arguments[1]);"data"in arguments[1]&&l.populate()}).bind("unautocomplete",function(){u.unbind();r.unbind();n(t.form).unbind(".autocomplete")})};n.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(n){return n[0]},formatMatch:null,autoFill:!1,width:0,multiple:!1,multipleSeparator:", ",highlight:function(n,t){return n.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+t.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1<\/strong>")},scroll:!0,scrollHeight:180};n.Autocompleter.Cache=function(t){function u(n,i){t.matchCase||(n=n.toLowerCase());var r=n.indexOf(i);return(t.matchContains=="word"&&(r=n.toLowerCase().search("\\b"+i.toLowerCase())),r==-1)?!1:r==0||t.matchContains}function f(n,u){r>t.cacheLength&&o();i[n]||r++;i[n]=u}function e(){var r,h,u,c,i,e,o,s;if(!t.data)return!1;for(r={},h=0,t.url||(t.cacheLength=1),r[""]=[],u=0,c=t.data.length;u<c;u++)(i=t.data[u],i=typeof i=="string"?[i]:i,e=t.formatMatch(i,u+1,t.data.length),e!==!1)&&(o=e.charAt(0).toLowerCase(),r[o]||(r[o]=[]),s={value:e,data:i,result:t.formatResult&&t.formatResult(i)||e},r[o].push(s),h++<t.max&&r[""].push(s));n.each(r,function(n,i){t.cacheLength++;f(n,i)})}function o(){i={};r=0}var i={},r=0;return setTimeout(e,25),{flush:o,add:f,populate:e,load:function(f){var h,s,o,e;if(!t.cacheLength||!r)return null;if(!t.url&&t.matchContains){e=[];for(h in i)h.length>0&&(o=i[h],n.each(o,function(n,t){u(t.value,f)&&e.push(t)}));return e}if(i[f])return i[f];if(t.matchSubset)for(s=f.length-1;s>=t.minChars;s--)if(o=i[f.substr(0,s)],o)return e=[],n.each(o,function(n,t){u(t.value,f)&&(e[e.length]=t)}),e;return null}}};n.Autocompleter.Select=function(t,i,r,u){function p(){y&&(h=n("<div/>").hide().addClass(t.resultsClass).css("position","absolute").appendTo(document.body),o=n("<ul/>").appendTo(h).mouseover(function(t){a(t).nodeName&&a(t).nodeName.toUpperCase()=="LI"&&(e=n("li",o).removeClass(s.ACTIVE).index(a(t)),n(a(t)).addClass(s.ACTIVE))}).click(function(t){return n(a(t)).addClass(s.ACTIVE),r(),i.focus(),!1}).mousedown(function(){u.mouseDownOnSelect=!0}).mouseup(function(){u.mouseDownOnSelect=!1}),t.width>0&&h.css("width",t.width),y=!1)}function a(n){for(var t=n.target;t&&t.tagName!="LI";)t=t.parentNode;return t?t:[]}function l(n){var r,i;f.slice(e,e+1).removeClass(s.ACTIVE);w(n);r=f.slice(e,e+1).addClass(s.ACTIVE);t.scroll&&(i=0,f.slice(0,e).each(function(){i+=this.offsetHeight}),i+r[0].offsetHeight-o.scrollTop()>o[0].clientHeight?o.scrollTop(i+r[0].offsetHeight-o.innerHeight()):i<o.scrollTop()&&o.scrollTop(i))}function w(n){e+=n;e<0?e=f.size()-1:e>=f.size()&&(e=0)}function b(n){return t.max&&t.max<n?t.max:n}function k(){var r,i,u,h;for(o.empty(),r=b(c.length),i=0;i<r;i++)c[i]&&(u=t.formatItem(c[i].data,i+1,r,c[i].value,v),u!==!1)&&(h=n("<li/>").html(t.highlight(u,v)).addClass(i%2==0?"ac_even":"ac_odd").appendTo(o)[0],n.data(h,"ac_data",c[i]));f=o.find("li");t.selectFirst&&(f.slice(0,1).addClass(s.ACTIVE),e=0);n.fn.bgiframe&&o.bgiframe()}var s={ACTIVE:"ac_over"},f,e=-1,c,v="",y=!0,h,o;return{display:function(n,t){p();c=n;v=t;k()},next:function(){l(1)},prev:function(){l(-1)},pageUp:function(){e!=0&&e-8<0?l(-e):l(-8)},pageDown:function(){e!=f.size()-1&&e+8>f.size()?l(f.size()-1-e):l(8)},hide:function(){h&&h.hide();f&&f.removeClass(s.ACTIVE);e=-1},visible:function(){return h&&h.is(":visible")},current:function(){return this.visible()&&(f.filter("."+s.ACTIVE)[0]||t.selectFirst&&f[0])},show:function(){var e=n(i).offset(),r,u;h.css({width:typeof t.width=="string"||t.width>0?t.width:n(i).width(),top:e.top+i.offsetHeight,left:e.left}).show();t.scroll&&(o.scrollTop(0),o.css({maxHeight:t.scrollHeight,overflow:"auto"}),document.all&&typeof document.body.style.maxHeight=="undefined"&&(r=0,f.each(function(){r+=this.offsetHeight}),u=r>t.scrollHeight,o.css("height",u?t.scrollHeight:r),u||f.width(o.width()-parseInt(f.css("padding-left"))-parseInt(f.css("padding-right")))))},selected:function(){var t=f&&f.filter("."+s.ACTIVE).removeClass(s.ACTIVE);return t&&t.length&&n.data(t[0],"ac_data")},emptyList:function(){o&&o.empty()},unbind:function(){h&&h.remove()}}};n.fn.selection=function(n,t){var i,r;if(n!==undefined)return this.each(function(){if(this.createTextRange){var i=this.createTextRange();t===undefined||n==t?(i.move("character",n),i.select()):(i.collapse(!0),i.moveStart("character",n),i.moveEnd("character",t),i.select())}else this.setSelectionRange?this.setSelectionRange(n,t):this.selectionStart&&(this.selectionStart=n,this.selectionEnd=t)});if(i=this[0],i.createTextRange){var u=document.selection.createRange(),o=i.value,f="<->",e=u.text.length;return u.text=f,r=i.value.indexOf(f),i.value=o,this.selection(r,r+e),{start:r,end:r+e}}if(i.selectionStart!==undefined)return{start:i.selectionStart,end:i.selectionEnd}}}(jQuery);
/*!
 * hoverIntent v1.8.1 // 2014.08.11 // jQuery v1.9.1+
 * http://briancherne.github.io/jquery-hoverIntent/
 *
 * You may use hoverIntent under the terms of the MIT license. Basically that
 * means you are free to use hoverIntent as long as this header is left intact.
 * Copyright 2007, 2014 Brian Cherne
 */
(function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):jQuery&&!jQuery.fn.hoverIntent&&n(jQuery)})(function(n){"use strict";var f={interval:100,sensitivity:6,timeout:0},e=0,t,i,r=function(n){t=n.pageX;i=n.pageY},u=function(n,f,e,o){if(Math.sqrt((e.pX-t)*(e.pX-t)+(e.pY-i)*(e.pY-i))<o.sensitivity)return f.off(e.event,r),delete e.timeoutId,e.isActive=!0,n.pageX=t,n.pageY=i,delete e.pX,delete e.pY,o.over.apply(f[0],[n]);e.pX=t;e.pY=i;e.timeoutId=setTimeout(function(){u(n,f,e,o)},o.interval)},o=function(n,t,i,r){return delete t.data("hoverIntent")[i.id],r.apply(t[0],[n])};n.fn.hoverIntent=function(t,i,s){var c=e++,h=n.extend({},f),l;n.isPlainObject(t)?(h=n.extend(h,t),n.isFunction(h.out)||(h.out=h.over)):h=n.isFunction(i)?n.extend(h,{over:t,out:i,selector:s}):n.extend(h,{over:t,out:t,selector:i});l=function(t){var e=n.extend({},t),f=n(this),s=f.data("hoverIntent"),i,l;if(s||f.data("hoverIntent",s={}),i=s[c],i||(s[c]=i={id:c}),i.timeoutId&&(i.timeoutId=clearTimeout(i.timeoutId)),l=i.event="mousemove.hoverIntent.hoverIntent"+c,t.type==="mouseenter"){if(i.isActive)return;i.pX=e.pageX;i.pY=e.pageY;f.off(l,r).on(l,r);i.timeoutId=setTimeout(function(){u(e,f,i,h)},h.interval)}else{if(!i.isActive)return;f.off(l,r);i.timeoutId=setTimeout(function(){o(e,f,i,h.out)},h.timeout)}};return this.on({"mouseenter.hoverIntent":l,"mouseleave.hoverIntent":l},h.selector)}}),function(n){function s(o){return t=n(o.data.el),t.blur(),r=i?f(o).x:f(o).y,u=(i?t.width():t.height())-r,t.css("opacity",.25),n(document).mousemove(h).mouseup(e),!1}function h(n){var h=i?f(n).x:f(n).y,s=u+h;return r>=h&&(s-=5),r=h,s=Math.max(o,s),i?t.width(s+"px"):t.height(s+"px"),s<o&&e(n),!1}function e(){n(document).unbind("mousemove",h).unbind("mouseup",e);t&&(t.css("opacity",1),t.focus());t=null;u=null;r=0}function f(n){return{x:n.clientX+document.documentElement.scrollLeft,y:n.clientY+document.documentElement.scrollTop}}var t,u,r=0,o=32,i=!1;n.fn.TextAreaResizer=function(r){i=r;var f=document.activeElement;return this.each(function(){t=n(this).addClass("processed");u=null;i?n(this).wrap('<div class="resizable-control"><div class="wrap"><\/div><\/div>').parent().parent().append(n('<div class="grippie"> <\/div>').bind("mousedown",{el:this},s)):n(this).wrap('<div class="resizable-control"><span><\/span><\/div>').parent().append(n('<div class="grippie"> <\/div>').bind("mousedown",{el:this},s));var r=n("div.grippie",n(this).parent())[0];r&&(i?r.style.marginBottom=r.offsetHeight-n(this)[0].offsetHeight+"px":r.style.marginRight=r.offsetWidth-n(this)[0].offsetWidth+"px");f&&f.focus()})}}(jQuery);